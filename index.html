<!DOCTYPE html>
<!--
================================================================================
    DASHBOARD DE PRODUCCIÓN - SETUP TEST 1.0 LAIVE
================================================================================
    
    AUTOR: Elmerciot
    FECHA: Diciembre 2025
    VERSIÓN: 1.0
    
    DESCRIPCIÓN:
    Sistema de control visual para monitoreo de tiempos de setup en línea de
    producción. Diseñado para pantallas grandes en planta industrial.
    
    FUNCIONALIDADES PRINCIPALES:
    - Temporizador de doble fase (Fase 1: 29 min, Fase 2: 80 min)
    - 4 tarjetas de tareas para diferentes operadores
    - Barras de progreso con colores de alerta (verde/amarillo/rojo)
    - Sistema de seguimiento de tareas del equipo
    - Modo pantalla completa para visualización en planta
    
    AVISO LEGAL - ELMERCIOT:
    Este código fue desarrollado por Elmerciot para uso exclusivo de LAIVE.
    Cualquier modificación, copia o distribución no autorizada está prohibida.
    Todos los derechos reservados © 2025 Elmerciot
    
    NO MODIFICAR SIN AUTORIZACIÓN DEL AUTOR
================================================================================
-->
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SETUP TEST 1.0 - LAIVE</title>
    <!-- Elmerciot: Tipografía Inter de Google Fonts para diseño profesional -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        /* ========================================================================
           ESTILOS GLOBALES - Desarrollado por Elmerciot
           Elmerciot: Reset de estilos para consistencia entre navegadores
        ======================================================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ========================================================================
           VARIABLES DE COLORES - MARCA LAIVE
           Elmerciot: Colores corporativos de Laive para identidad visual
           - Rojo Laive: #E30613 (Pantone Red 032C)
           - Verde Laive: #006B3F (Pantone 355 C)
        ======================================================================== */
        :root {
            --laive-red: #E30613;
            --laive-green: #006B3F;
            --bg-primary: #FFFFFF;
            --text-primary: #111111;
        }

        /* Elmerciot: Los iconos SVG fueron removidos para simplificar el código */
        .icon-task {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 1.2em;
            height: 1.2em;
            margin-right: 0.4em;
            vertical-align: middle;
        }

        .icon-task svg {
            width: 100%;
            height: 100%;
        }

        .icon-green {
            fill: var(--laive-green);
        }

        .icon-red {
            fill: var(--laive-red);
        }

        /* by: Elmer */
        body {
            font-family: 'Inter', sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            padding-bottom: 60px;
            position: relative;
        }

        /* EFECTO DE NIEVE */
        .snowflakes {
            display: none;
        }

        .snowflake {
            position: absolute;
            top: -20px;
            color: #ffffff;
            font-size: 1rem;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
            animation: snowfall linear infinite;
            opacity: 0.7;
        }

        .snowflake:nth-child(1) {
            left: 5%;
            animation-duration: 10s;
            animation-delay: 0s;
            font-size: 0.8rem;
            opacity: 0.6;
        }

        .snowflake:nth-child(2) {
            left: 15%;
            animation-duration: 12s;
            animation-delay: 1s;
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .snowflake:nth-child(3) {
            left: 25%;
            animation-duration: 8s;
            animation-delay: 2s;
            font-size: 0.9rem;
            opacity: 0.5;
        }

        .snowflake:nth-child(4) {
            left: 35%;
            animation-duration: 14s;
            animation-delay: 0.5s;
            font-size: 1rem;
            opacity: 0.7;
        }

        .snowflake:nth-child(5) {
            left: 45%;
            animation-duration: 11s;
            animation-delay: 3s;
            font-size: 1.1rem;
            opacity: 0.6;
        }

        .snowflake:nth-child(6) {
            left: 55%;
            animation-duration: 9s;
            animation-delay: 1.5s;
            font-size: 0.7rem;
            opacity: 0.5;
        }

        .snowflake:nth-child(7) {
            left: 65%;
            animation-duration: 13s;
            animation-delay: 2.5s;
            font-size: 1.3rem;
            opacity: 0.8;
        }

        .snowflake:nth-child(8) {
            left: 75%;
            animation-duration: 10s;
            animation-delay: 4s;
            font-size: 0.85rem;
            opacity: 0.6;
        }

        .snowflake:nth-child(9) {
            left: 85%;
            animation-duration: 15s;
            animation-delay: 0s;
            font-size: 1rem;
            opacity: 0.7;
        }

        .snowflake:nth-child(10) {
            left: 95%;
            animation-duration: 7s;
            animation-delay: 2s;
            font-size: 0.75rem;
            opacity: 0.5;
        }

        .snowflake:nth-child(11) {
            left: 10%;
            animation-duration: 11s;
            animation-delay: 3.5s;
            font-size: 1.1rem;
            opacity: 0.65;
        }

        .snowflake:nth-child(12) {
            left: 30%;
            animation-duration: 9s;
            animation-delay: 1s;
            font-size: 0.95rem;
            opacity: 0.55;
        }

        .snowflake:nth-child(13) {
            left: 50%;
            animation-duration: 12s;
            animation-delay: 4.5s;
            font-size: 1.15rem;
            opacity: 0.75;
        }

        .snowflake:nth-child(14) {
            left: 70%;
            animation-duration: 8s;
            animation-delay: 2s;
            font-size: 0.8rem;
            opacity: 0.5;
        }

        .snowflake:nth-child(15) {
            left: 90%;
            animation-duration: 14s;
            animation-delay: 0.5s;
            font-size: 1.05rem;
            opacity: 0.7;
        }

        @keyframes snowfall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.7;
            }

            90% {
                opacity: 0.7;
            }

            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* by: Elmer */
        /* Alerta de página */
        .page-alert {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 998;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .page-alert.warning {
            animation: warningPulse 1s infinite;
            opacity: 1;
        }

        .page-alert.critical {
            animation: criticalPulse 0.4s infinite;
            opacity: 1;
        }

        @keyframes warningPulse {

            0%,
            100% {
                box-shadow: inset 0 0 100px rgba(245, 158, 11, 0);
            }

            50% {
                box-shadow: inset 0 0 150px rgba(245, 158, 11, 0.3);
            }
        }

        @keyframes criticalPulse {

            0%,
            100% {
                box-shadow: inset 0 0 100px rgba(239, 68, 68, 0);
            }

            50% {
                box-shadow: inset 0 0 200px rgba(239, 68, 68, 0.4);
            }
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* SIDEBAR - RESPONSIVO */
        .sidebar {
            width: 16%;
            min-width: 200px;
            max-width: 280px;
            background: #FFFFFF;
            border-right: 1px solid #E5E5E5;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #E5E5E5;
        }

        .logo-container {
            width: 180px;
            height: 120px;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0);
                filter: drop-shadow(0 4px 12px rgba(227, 6, 19, 0.4));
            }

            50% {
                transform: translateY(-8px);
                filter: drop-shadow(0 8px 20px rgba(0, 107, 63, 0.4));
            }
        }

        @keyframes logoGradient {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-8px) scale(1.02);
            }
        }

        @keyframes borderRotate {
            0% {
                background-position: 0% 50%;
            }

            100% {
                background-position: 400% 50%;
            }
        }

        .logo-container svg {
            width: 50px;
            height: 50px;
            fill: white;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .project-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.5rem;
            background: linear-gradient(135deg, #FEF2F2, #FEE2E2);
            border: 2px solid var(--laive-red);
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            color: var(--laive-red);
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(227, 6, 19, 0.3);
            }

            50% {
                box-shadow: 0 0 20px 5px rgba(227, 6, 19, 0.15);
            }
        }

        .project-title {
            font-size: 4rem;
            font-weight: 900;
            color: var(--laive-red);
            margin-bottom: 0.5rem;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
            letter-spacing: 1px;
        }

        .project-subtitle {
            font-size: 1.1rem;
            color: #333333;
        }

        .project-subtitle span {
            color: var(--laive-green);
            font-weight: 700;
        }

        /* Animación de escritura para el creador - MEJORADA */
        .creator-credit {
            font-size: 1.3rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            margin-top: 0.5rem;
        }

        .typewriter {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            border-right: 4px solid var(--laive-red);
            padding-right: 5px;
            animation: typing 3s steps(9) infinite, blink 0.6s step-end infinite;
            color: var(--laive-red);
            font-weight: 900;
            font-size: 1.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        @keyframes typing {

            0%,
            5% {
                width: 0;
            }

            25%,
            75% {
                width: 100%;
            }

            95%,
            100% {
                width: 0;
            }
        }

        @keyframes blink {
            50% {
                border-color: transparent;
            }
        }

        .team-section {
            flex: 1;
            overflow-y: auto;
            max-height: calc(100vh - 350px);
        }

        /* SECCIÓN PATROCINADO POR */
        .my-company-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #E5E5E5;
        }

        .my-company-container {
            background: transparent;
            border: none;
            padding: 1rem 0;
            text-align: center;
        }

        .my-company-label {
            font-size: 0.8rem;
            font-weight: 800;
            color: var(--laive-red);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .my-company-logo {
            width: 100%;
            max-width: 320px;
            height: auto;
            max-height: 200px;
            object-fit: contain;
            margin: 0.5rem auto;
            display: block;
            filter: drop-shadow(0 6px 20px rgba(0, 0, 0, 0.2)) contrast(1.05) brightness(1.02);
            animation: logoFloat 3s ease-in-out infinite;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0) scale(1);
                filter: drop-shadow(0 6px 20px rgba(0, 0, 0, 0.2)) contrast(1.05) brightness(1.02);
            }

            50% {
                transform: translateY(-10px) scale(1.04);
                filter: drop-shadow(0 15px 35px rgba(0, 0, 0, 0.3)) contrast(1.05) brightness(1.05);
            }
        }

        .my-company-placeholder {
            width: 100%;
            height: 80px;
            background: #F5F5F5;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.85rem;
            font-weight: 600;
            border: 2px dashed #DDD;
        }


        .team-section-title {
            font-size: 1rem;
            font-weight: 800;
            background: #FFFFFF;
            padding: 1.2rem 1.8rem;
            border-radius: 12px;
            border: 1px solid #E5E5E5;
            border-left: 4px solid var(--laive-red);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--laive-red);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .team-section-title::before {
            content: '◉';
            font-size: 1.4rem;
            color: var(--laive-green);
        }

        .team-group {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1.25rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }



        .team-group-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #E5E5E5;
        }

        .team-group-icon {
            width: 60px;
            height: 60px;
            background: var(--laive-green);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .team-group-icon.red {
            background: var(--laive-red);
        }

        .team-group-icon svg {
            width: 26px;
            height: 26px;
            fill: white;
        }

        .team-group-name {
            font-size: 1.6rem;
            font-weight: 800;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .team-members {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.85rem 1.1rem;
            background: #FFFFFF;
            border-radius: 8px;
            border: 1px solid #E5E5E5;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .member-indicator {
            width: 12px;
            height: 12px;
            background: var(--laive-green);
            border-radius: 50%;
        }

        .member-indicator.pending {
            background: #CCCCCC;
        }

        @keyframes indicatorPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        .member-name {
            font-size: 1.8rem;
            color: #000000;
            font-weight: 700;
        }

        /* Lista de tareas por miembro - RULETA VERTICAL (2 visibles) */
        .member-tasks-list {
            margin-top: 0.5rem;
            padding-left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            max-height: 60px;
            overflow: hidden;
            position: relative;
            mask-image: linear-gradient(to bottom, black 0%, black 80%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 0%, black 80%, transparent 100%);
        }

        .member-tasks-list::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 15px;
            pointer-events: none;
        }

        .member-task-item {
            font-size: 1rem;
            color: #333333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.5rem;
            border-radius: 6px;
            min-height: 30px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center left;
            opacity: 1;
        }

        .member-task-item.completed {
            text-decoration: line-through;
            opacity: 0;
            color: #999999;
            transform: translateY(-100%) scale(0.8);
            height: 0;
            min-height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        .member-task-item.active {
            font-weight: 700;
            color: var(--laive-green);
            background: linear-gradient(90deg, rgba(0, 107, 63, 0.12), transparent);
            transform: scale(1.02);
            border-left: 3px solid var(--laive-green);
            padding-left: 0.6rem;
        }

        .member-task-item.pending {
            opacity: 0.5;
        }

        .task-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .task-indicator.completed {
            background: #cbd5e1;
            width: 6px;
            height: 6px;
        }

        .task-indicator.active {
            background: var(--laive-green);
            box-shadow: 0 0 12px rgba(0, 107, 63, 0.7);
            animation: indicatorPulseFast 1s ease-in-out infinite;
        }

        .task-indicator.pending {
            background: #e2e8f0;
            border: 2px solid #cbd5e1;
        }

        @keyframes indicatorPulseFast {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 12px rgba(0, 107, 63, 0.7);
            }

            50% {
                transform: scale(1.4);
                box-shadow: 0 0 20px rgba(0, 107, 63, 1);
            }
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            padding: 0.5rem;
            padding-bottom: 90px;
            /* Espacio para la barra de progreso inferior */
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* BANNER LOGÍSTICA - ESTILO INDUSTRIAL */
        .logistics-banner {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-left: 6px solid var(--laive-red);
            border-radius: 12px;
            padding: 1.5rem 2rem;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .logistics-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .logistics-icon-wrapper {
            width: 48px;
            height: 48px;
            background: #FEE2E2;
            border: 2px solid var(--laive-red);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logistics-icon-wrapper svg {
            width: 26px;
            height: 26px;
            fill: var(--laive-red);
        }

        .logistics-label {
            font-size: 0.75rem;
            color: #555555;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .logistics-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--laive-red);
        }



        .logistics-content {
            position: relative;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logistics-text {
            position: absolute;
            font-size: 2.5rem;
            font-weight: 700;
            color: #111111;
            text-align: center;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(20px) scale(0.95);
        }

        .logistics-text.active {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* CRONÓMETRO - ESTILO INDUSTRIAL */
        .timer-section {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.4s ease;
            position: relative;
        }

        .timer-section.warning {
            border-color: #F59E0B;
            border-width: 2px;
        }

        .timer-section.critical {
            border-color: #EF4444;
            border-width: 2px;
            animation: timerShake 0.3s infinite;
        }

        @keyframes timerShake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-4px);
            }

            75% {
                transform: translateX(4px);
            }
        }

        .timer-display {
            font-size: 20rem;
            font-weight: 900;
            letter-spacing: 10px;
            color: var(--laive-green);
            margin-bottom: 0.5rem;
            font-variant-numeric: tabular-nums;
            transition: color 0.5s ease;
            text-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
            line-height: 1;
        }

        .timer-display.green {
            color: var(--laive-green);
        }

        .timer-display.warning {
            color: #D97706;
        }

        .timer-display.critical {
            color: var(--laive-red);
            animation: timerBlink 0.3s infinite;
        }

        @keyframes timerBlink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .progress-container {
            background: #F1F5F9;
            border-radius: 8px;
            height: 28px;
            position: relative;
            border: 1px solid #E5E5E5;
            cursor: pointer;
            user-select: none;
        }

        .progress-container:active {
            border-color: var(--laive-green);
            box-shadow: 0 0 20px rgba(0, 107, 63, 0.3);
        }

        .progress-bar {
            height: 100%;
            border-radius: 6px;
            transition: width 0.1s linear, background 0.5s ease;
        }



        .progress-handle {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 36px;
            background: #FFFFFF;
            border: 2px solid var(--laive-green);
            border-radius: 8px;
            cursor: grab;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* Colores de barra sincronizados: Verde → Amarillo → Rojo */
        .progress-green {
            background: var(--laive-green);
        }

        .progress-yellow {
            background: #D97706;
        }

        .progress-red {
            background: var(--laive-red);
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            font-size: 1.4rem;
            color: #333333;
            font-weight: 800;
        }

        /* GRID DE TAREAS */
        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.4rem;
            flex: 1;
            justify-content: center;
            align-content: center;
            max-width: 100%;
        }

        /* TARJETAS DE TAREAS - ESTILO INDUSTRIAL */
        .task-card {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-left: 5px solid var(--laive-green);
            border-radius: 10px;
            padding: 0.3rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        /* Barra de progreso que cubre la tarjeta - MÁS VISIBLE */
        .task-card-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s linear, background 0.5s ease;
            z-index: 1;
            opacity: 0.6;
        }

        .task-card-progress.card-progress-green {
            background: rgba(0, 107, 63, 0.4);
        }

        .task-card-progress.card-progress-yellow {
            background: rgba(217, 119, 6, 0.45);
        }

        .task-card-progress.card-progress-red {
            background: rgba(227, 6, 19, 0.45);
        }

        /* Animación de temblor para estado crítico */
        .task-card.card-shake {
            animation: cardShake 0.4s infinite !important;
        }

        @keyframes cardShake {

            0%,
            100% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-5px) rotate(-0.5deg);
            }

            40% {
                transform: translateX(5px) rotate(0.5deg);
            }

            60% {
                transform: translateX(-4px) rotate(-0.3deg);
            }

            80% {
                transform: translateX(4px) rotate(0.3deg);
            }
        }

        .task-card-content-wrapper {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 1.2rem;
            padding: 1.2rem;
        }

        /* Estado idle - borde gris */
        .task-card.idle {
            background: #FAFAFA;
            border-left-color: #CCCCCC;
            border-color: #E5E5E5;
        }

        .task-card.idle .task-card-progress {
            opacity: 0 !important;
            width: 0% !important;
        }

        .task-card.idle .task-status-badge {
            background: #F1F5F9;
            border-color: #CBD5E1;
            color: #64748B;
        }

        /* Estado activo */
        .task-card.active-task {
            border-left-color: var(--laive-green);
            box-shadow: 0 4px 16px rgba(0, 107, 63, 0.1);
        }

        .task-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.7rem;
            border-bottom: none;
        }

        .task-role {
            font-size: 2.2rem;
            font-weight: 900;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            line-height: 1;
        }

        .task-status-badge {
            padding: 0.6rem 1.4rem;
            background: #ECFDF5;
            border: 2px solid var(--laive-green);
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 800;
            color: var(--laive-green);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 2px 8px rgba(0, 107, 63, 0.15);
        }



        .task-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem 0;
            min-height: 0;
            margin-top: 0.8rem;
            margin-bottom: 0.8rem;
        }

        .task-text {
            font-size: 5rem;
            font-weight: 800;
            color: #000000;
            line-height: 1.1;
            transition: all 0.5s ease;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3em;
            flex-wrap: wrap;
            word-break: break-word;
            max-width: 100%;
            overflow: hidden;
        }

        .task-text.fade-out {
            opacity: 0;
            transform: translateY(-15px) scale(0.95);
        }

        /* TEMPORIZADOR DE TARJETA */
        .task-timer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding: 1rem;
            background: transparent;
            border-radius: 4px;
            border: none;
        }

        .task-timer-left {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
        }

        .task-timer-label {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .task-timer-duration {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--laive-green);
            font-variant-numeric: tabular-nums;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        .task-timer-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.25rem;
        }

        .task-timer-elapsed {
            font-size: 3rem;
            font-weight: 900;
            font-variant-numeric: tabular-nums;
            color: var(--laive-green);
            transition: color 0.3s ease;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .task-timer-elapsed.warning {
            color: #D97706;
        }

        .task-timer-elapsed.critical {
            color: var(--laive-red);
            animation: timerPulse 0.5s ease-in-out infinite;
        }

        @keyframes timerPulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        .task-timer-separator {
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom, transparent, rgba(0, 107, 63, 0.3), transparent);
            margin: 0 1rem;
        }

        .idle .task-timer-container {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.04);
        }

        .idle .task-timer-duration,
        .idle .task-timer-elapsed {
            color: #999;
        }

        /* BOTONES DE CONTROL - BARRA FLOTANTE ESQUINA */
        .controls-section {
            display: none;
            /* Ocultar controles originales */
        }

        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 0.5rem;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 0.75rem;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            border: 2px solid #E5E5E5;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: all 0.2s ease;
            position: relative;
        }

        .floating-btn:hover {
            transform: scale(1.1);
        }

        .floating-btn:active {
            transform: scale(0.95);
        }

        .floating-btn.btn-start {
            background: var(--laive-green);
            color: white;
        }

        .floating-btn.btn-pause {
            background: #D97706;
            color: white;
        }

        .floating-btn.btn-pause.is-paused {
            background: var(--laive-green);
        }

        .floating-btn.btn-reset {
            background: #4B5563;
            color: white;
        }

        .floating-btn.btn-fullscreen {
            background: var(--laive-red);
            color: white;
        }

        .floating-btn.btn-fullscreen.is-fullscreen {
            background: var(--laive-green);
        }

        /* Botones de completar fase */
        .floating-btn.btn-complete-phase {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #111;
            font-size: 0.9rem;
            font-weight: 800;
            width: auto;
            padding: 0 1rem;
            border-radius: 25px;
        }

        .floating-btn.btn-complete-phase:hover {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        /* Tooltip para botones */
        .floating-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: #111;
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 5px;
            font-size: 0.7rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }

        .floating-btn:hover::after {
            opacity: 1;
        }

        /* Botón de pausa en overlay de overtime */
        .overtime-pause-btn {
            padding: 1.5rem 4rem;
            font-size: 1.8rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 4px;
            background: white;
            color: var(--laive-red);
            border: 4px solid white;
            border-radius: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            animation: pauseBtnPulse 1s ease-in-out infinite;
        }

        .overtime-pause-btn:hover {
            background: transparent;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.5);
        }

        @keyframes pauseBtnPulse {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            }

            50% {
                box-shadow: 0 0 40px rgba(255, 255, 255, 0.8);
            }
        }

        .control-btn {
            padding: 1rem 2.5rem;
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        /* Botón Iniciar - Verde sólido */
        .btn-start {
            background: var(--laive-green);
            color: #FFFFFF;
            box-shadow: 0 4px 12px rgba(0, 107, 63, 0.3);
        }

        .btn-start:hover {
            background: #005A35;
            box-shadow: 0 6px 16px rgba(0, 107, 63, 0.4);
        }

        /* Botón Pausar - Naranja sólido */
        .btn-pause {
            background: #D97706;
            color: #FFFFFF;
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);
        }

        .btn-pause:hover {
            background: #B45309;
            box-shadow: 0 6px 16px rgba(217, 119, 6, 0.4);
        }

        .btn-pause.is-paused {
            background: var(--laive-green);
        }

        /* Botón Reiniciar - Gris oscuro */
        .btn-reset {
            background: #4B5563;
            color: #FFFFFF;
            box-shadow: 0 4px 12px rgba(75, 85, 99, 0.3);
        }

        .btn-reset:hover {
            background: #374151;
            box-shadow: 0 6px 16px rgba(75, 85, 99, 0.4);
        }

        /* Botón Pantalla Completa - Rojo Laive */
        .btn-fullscreen {
            background: var(--laive-red);
            color: #FFFFFF;
            box-shadow: 0 4px 12px rgba(227, 6, 19, 0.3);
        }

        .btn-fullscreen:hover {
            background: #B8050F;
            box-shadow: 0 6px 16px rgba(227, 6, 19, 0.4);
        }

        .btn-fullscreen.is-fullscreen {
            background: var(--laive-green);
        }

        /* BARRA DE PROGRESO INFERIOR - ESTILO INDUSTRIAL */
        .bottom-progress {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #FFFFFF;
            padding: 0.5rem 2rem;
            z-index: 999;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.06);
            border-top: 3px solid var(--laive-red);
        }

        .bottom-progress-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .bottom-progress-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            min-width: 200px;
        }

        .bottom-progress-label {
            font-size: 0.85rem;
            font-weight: 800;
            color: #444444;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .bottom-progress-value {
            font-size: 4rem;
            font-weight: 900;
            color: #000000;
            transition: color 0.3s;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .bottom-progress-value.green {
            color: var(--laive-green);
        }

        .bottom-progress-value.yellow {
            color: #D97706;
        }

        .bottom-progress-value.red {
            color: var(--laive-red);
        }

        .bottom-progress-bar-wrapper {
            flex: 1;
        }

        .bottom-progress-bar-container {
            background: #F1F5F9;
            border-radius: 6px;
            height: 20px;
            overflow: hidden;
            border: 1px solid #E5E5E5;
        }

        .bottom-progress-bar {
            height: 100%;
            border-radius: 5px;
            transition: width 0.2s linear, background 0.5s ease;
        }

        .bottom-time-display {
            font-size: 1.5rem;
            font-weight: 800;
            color: #111111;
            min-width: 100px;
            text-align: right;
        }

        /* MODAL DE FINALIZACIÓN - ÉPICO */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Efecto de destrucción - contenido cae */
        .dashboard-container.falling {
            animation: fallDown 1s ease-in forwards;
        }

        @keyframes fallDown {
            0% {
                transform: translateY(0) rotate(0);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(5deg);
                opacity: 0;
            }
        }

        .modal-content {
            background: #FFFFFF;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: scale(0) translateY(-100px);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
            border-top: 6px solid var(--laive-green);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-icon {
            width: 100px;
            height: 100px;
            background: var(--laive-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            animation: iconPop 0.6s ease 0.3s both;
        }

        @keyframes iconPop {
            0% {
                transform: scale(0) rotate(-180deg);
            }

            60% {
                transform: scale(1.2) rotate(10deg);
            }

            100% {
                transform: scale(1) rotate(0deg);
            }
        }

        .modal-icon svg {
            width: 50px;
            height: 50px;
            fill: white;
        }

        .modal-title {
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--laive-green);
            margin-bottom: 0.5rem;
            animation: slideUp 0.5s ease 0.4s both;
        }

        @keyframes slideUp {
            0% {
                transform: translateY(30px);
                opacity: 0;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-subtitle {
            font-size: 1.2rem;
            color: #333333;
            margin-bottom: 2rem;
            animation: slideUp 0.5s ease 0.5s both;
        }

        .modal-subtitle span {
            color: var(--laive-red);
            font-weight: 700;
        }

        /* Contador de 10 segundos */
        .modal-countdown {
            font-size: 4rem;
            font-weight: 900;
            color: var(--laive-green);
            margin-bottom: 1.5rem;
            font-variant-numeric: tabular-nums;
            transition: all 0.3s ease;
            animation: slideUp 0.5s ease 0.6s both;
        }

        .modal-countdown.warning {
            color: #D97706;
            animation: countdownPulse 0.5s ease infinite;
        }

        .modal-countdown.critical {
            color: var(--laive-red);
            animation: countdownShake 0.2s ease infinite;
        }

        @keyframes countdownPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        @keyframes countdownShake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .modal-countdown-label {
            font-size: 0.9rem;
            color: #666666;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 1.5rem;
            animation: slideUp 0.5s ease 0.7s both;
        }

        .modal-btn {
            padding: 1rem 3rem;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: var(--laive-green);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: slideUp 0.5s ease 0.8s both;
        }

        .modal-btn:hover {
            background: #005A35;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 107, 63, 0.4);
        }

        /* Borde del modal cambia con el countdown */
        .modal-content.countdown-warning {
            border-top-color: #D97706;
        }

        .modal-content.countdown-critical {
            border-top-color: var(--laive-red);
            animation: modalShake 0.3s ease infinite;
        }

        @keyframes modalShake {

            0%,
            100% {
                transform: scale(1) translateX(0);
            }

            25% {
                transform: scale(1) translateX(-3px);
            }

            75% {
                transform: scale(1) translateX(3px);
            }
        }

        @media (max-width: 1200px) {
            .sidebar {
                width: 300px;
                min-width: 300px;
            }

            .timer-display {
                font-size: 4.5rem;
            }
        }

        @media (max-width: 900px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                min-width: 100%;
            }

            .tasks-grid {
                grid-template-columns: 1fr;
            }

            .timer-display {
                font-size: 3.5rem;
            }

            .bottom-progress-content {
                flex-wrap: wrap;
            }
        }

        /* ============================================
           EFECTO DE DESTRUCCIÓN ÉPICO - PROFESIONAL
           ============================================ */

        /* Contenedor de efectos de destrucción */
        .destruction-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
        }

        .destruction-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Flash de impacto inicial */
        .impact-flash {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(227, 6, 19, 0.8) 30%,
                    transparent 70%);
            opacity: 0;
            animation: impactFlash 0.4s ease-out forwards;
        }

        @keyframes impactFlash {
            0% {
                opacity: 1;
                transform: scale(0.5);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.5);
            }

            100% {
                opacity: 0;
                transform: scale(2);
            }
        }

        /* Onda de choque */
        .shockwave {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 4px solid var(--laive-red);
            transform: translate(-50%, -50%);
            animation: shockwaveExpand 0.8s ease-out forwards;
            box-shadow: 0 0 30px var(--laive-red), inset 0 0 30px var(--laive-red);
        }

        .shockwave:nth-child(2) {
            animation-delay: 0.1s;
            border-color: var(--laive-green);
            box-shadow: 0 0 30px var(--laive-green), inset 0 0 30px var(--laive-green);
        }

        .shockwave:nth-child(3) {
            animation-delay: 0.2s;
            border-color: white;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.8), inset 0 0 30px rgba(255, 255, 255, 0.8);
        }

        @keyframes shockwaveExpand {
            0% {
                width: 50px;
                height: 50px;
                opacity: 1;
                border-width: 4px;
            }

            100% {
                width: 200vw;
                height: 200vw;
                opacity: 0;
                border-width: 2px;
            }
        }

        /* Partículas de explosión */
        .explosion-particles {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
        }

        .explosion-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            animation: particleExplode 1.5s ease-out forwards;
        }

        .explosion-particle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            filter: blur(3px);
        }

        @keyframes particleExplode {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* Fragmentos de destrucción */
        .destruction-fragment {
            position: absolute;
            background: linear-gradient(135deg, var(--laive-red), var(--laive-green));
            clip-path: polygon(50% 0%,
                    100% 25%,
                    100% 75%,
                    50% 100%,
                    0% 75%,
                    0% 25%);
            animation: fragmentFly 1.2s ease-out forwards;
            box-shadow: 0 0 20px rgba(227, 6, 19, 0.5);
        }

        @keyframes fragmentFly {
            0% {
                transform: translate(-50%, -50%) rotate(0deg) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--fx), var(--fy)) rotate(var(--fr)) scale(0);
                opacity: 0;
            }
        }

        /* Efecto glitch en el dashboard */
        .dashboard-container.glitching {
            animation: glitchEffect 0.15s infinite;
        }

        @keyframes glitchEffect {
            0% {
                transform: translate(0);
                filter: hue-rotate(0deg);
            }

            20% {
                transform: translate(-5px, 5px);
                filter: hue-rotate(90deg);
            }

            40% {
                transform: translate(-5px, -5px);
                filter: hue-rotate(180deg);
            }

            60% {
                transform: translate(5px, 5px);
                filter: hue-rotate(270deg);
            }

            80% {
                transform: translate(5px, -5px);
                filter: hue-rotate(360deg);
            }

            100% {
                transform: translate(0);
                filter: hue-rotate(0deg);
            }
        }

        /* Desintegración del dashboard */
        .dashboard-container.disintegrating {
            animation: disintegrateEffect 0.8s ease-out forwards;
        }

        @keyframes disintegrateEffect {
            0% {
                opacity: 1;
                transform: scale(1);
                filter: blur(0);
            }

            30% {
                opacity: 0.8;
                transform: scale(1.02);
                filter: blur(2px);
            }

            100% {
                opacity: 0;
                transform: scale(0.95) translateY(50px);
                filter: blur(10px);
            }
        }

        /* Elementos individuales volando */
        .dashboard-container.destroying .sidebar {
            animation: elementFlyLeft 0.8s ease-out forwards;
            animation-delay: 0.1s;
        }

        .dashboard-container.destroying .main-content {
            animation: elementFlyRight 0.8s ease-out forwards;
            animation-delay: 0.15s;
        }

        .dashboard-container.destroying .task-card {
            animation: cardExplode 0.6s ease-out forwards;
        }

        .dashboard-container.destroying .task-card:nth-child(1) {
            animation-delay: 0.1s;
            --explode-x: -100px;
            --explode-y: -80px;
            --explode-r: -25deg;
        }

        .dashboard-container.destroying .task-card:nth-child(2) {
            animation-delay: 0.15s;
            --explode-x: 100px;
            --explode-y: -80px;
            --explode-r: 25deg;
        }

        .dashboard-container.destroying .task-card:nth-child(3) {
            animation-delay: 0.2s;
            --explode-x: -100px;
            --explode-y: 80px;
            --explode-r: 25deg;
        }

        .dashboard-container.destroying .task-card:nth-child(4) {
            animation-delay: 0.25s;
            --explode-x: 100px;
            --explode-y: 80px;
            --explode-r: -25deg;
        }

        .dashboard-container.destroying .timer-section {
            animation: timerExplode 0.7s ease-out forwards;
            animation-delay: 0.05s;
        }

        @keyframes elementFlyLeft {
            0% {
                transform: translateX(0) rotate(0);
                opacity: 1;
            }

            100% {
                transform: translateX(-150%) rotate(-15deg);
                opacity: 0;
            }
        }

        @keyframes elementFlyRight {
            0% {
                transform: translateX(0) rotate(0);
                opacity: 1;
            }

            100% {
                transform: translateX(150%) rotate(15deg);
                opacity: 0;
            }
        }

        @keyframes cardExplode {
            0% {
                transform: translate(0, 0) rotate(0) scale(1);
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                transform: translate(var(--explode-x), var(--explode-y)) rotate(var(--explode-r)) scale(0.3);
                opacity: 0;
            }
        }

        @keyframes timerExplode {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.3);
                opacity: 0.8;
                filter: brightness(2);
            }

            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        /* Barra inferior desvaneciendo */
        .bottom-progress.destroying {
            animation: bottomSlideOut 0.6s ease-out forwards;
        }

        @keyframes bottomSlideOut {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(100%);
                opacity: 0;
            }
        }

        /* Texto de completado flotante */
        .completion-text-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10000;
            text-align: center;
            opacity: 0;
            animation: completionTextAppear 0.8s ease-out 0.5s forwards;
        }

        .completion-text-overlay h1 {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--laive-green), var(--laive-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            margin-bottom: 1rem;
            letter-spacing: 3px;
        }

        .completion-text-overlay p {
            font-size: 1.5rem;
            color: #333;
            font-weight: 600;
        }

        @keyframes completionTextAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }

            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }

            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Chispas brillantes */
        .spark {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px var(--laive-red), 0 0 20px 4px var(--laive-green);
            animation: sparkFly 0.8s ease-out forwards;
        }

        @keyframes sparkFly {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--sx), var(--sy)) scale(0);
                opacity: 0;
            }
        }

        /* Líneas de energía */
        .energy-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--laive-red), var(--laive-green), transparent);
            top: 50%;
            left: 50%;
            transform-origin: left center;
            animation: energyLineExpand 0.6s ease-out forwards;
        }

        @keyframes energyLineExpand {
            0% {
                width: 0;
                opacity: 1;
            }

            100% {
                width: 150vw;
                opacity: 0;
            }
        }

        /* Efecto de pantalla rota */
        .screen-crack {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
            opacity: 0;
        }

        .screen-crack.active {
            opacity: 1;
            animation: crackAppear 0.3s ease-out forwards;
        }

        @keyframes crackAppear {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 0.6;
            }
        }

        .screen-crack svg {
            width: 100%;
            height: 100%;
        }

        .screen-crack path {
            stroke: rgba(227, 6, 19, 0.4);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawCrack 0.5s ease-out forwards;
        }

        @keyframes drawCrack {
            to {
                stroke-dashoffset: 0;
            }
        }

        /* ============================================
           EFECTO DE CONSTRUCCIÓN FASE 2 - ÉPICO
           ============================================ */

        /* Overlay de construcción */
        .construction-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(0, 107, 63, 0.1) 0%, rgba(227, 6, 19, 0.1) 100%);
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
        }

        .construction-overlay.active {
            opacity: 1;
            visibility: visible;
            animation: constructionFlash 0.5s ease-out;
        }

        @keyframes constructionFlash {
            0% {
                background: rgba(255, 255, 255, 0.8);
            }

            100% {
                background: transparent;
            }
        }

        /* Dashboard construyéndose */
        .dashboard-container.constructing {
            opacity: 1 !important;
            transform: none !important;
            filter: none !important;
        }

        .dashboard-container.constructing .sidebar {
            animation: buildFromLeft 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .dashboard-container.constructing .main-content {
            animation: buildFromBottom 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s forwards;
        }

        .dashboard-container.constructing .timer-section {
            animation: buildScaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s forwards;
            opacity: 0;
        }

        .dashboard-container.constructing .task-card {
            animation: buildCardIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            opacity: 0;
        }

        .dashboard-container.constructing .task-card:nth-child(1) {
            animation-delay: 0.3s;
        }

        .dashboard-container.constructing .task-card:nth-child(2) {
            animation-delay: 0.4s;
        }

        .dashboard-container.constructing .task-card:nth-child(3) {
            animation-delay: 0.5s;
        }

        .dashboard-container.constructing .task-card:nth-child(4) {
            animation-delay: 0.6s;
        }

        .dashboard-container.constructing .logistics-banner {
            animation: buildSlideDown 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.15s forwards;
            opacity: 0;
            transform: translateY(-50px);
        }

        .dashboard-container.constructing .controls-section {
            animation: buildFromBottom 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.7s forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        .bottom-progress.constructing {
            animation: buildSlideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s forwards;
            opacity: 0;
            transform: translateY(100%);
        }

        @keyframes buildFromLeft {
            0% {
                transform: translateX(-100%) rotate(-5deg);
                opacity: 0;
            }

            60% {
                transform: translateX(5%) rotate(1deg);
                opacity: 1;
            }

            100% {
                transform: translateX(0) rotate(0);
                opacity: 1;
            }
        }

        @keyframes buildFromBottom {
            0% {
                transform: translateY(100px);
                opacity: 0;
            }

            60% {
                transform: translateY(-10px);
                opacity: 1;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes buildScaleIn {
            0% {
                transform: scale(0.3) translateY(50px);
                opacity: 0;
            }

            60% {
                transform: scale(1.1) translateY(-5px);
                opacity: 1;
            }

            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        @keyframes buildCardIn {
            0% {
                transform: translateY(80px) scale(0.8) rotate(-5deg);
                opacity: 0;
            }

            60% {
                transform: translateY(-10px) scale(1.05) rotate(1deg);
                opacity: 1;
            }

            100% {
                transform: translateY(0) scale(1) rotate(0);
                opacity: 1;
            }
        }

        @keyframes buildSlideDown {
            0% {
                transform: translateY(-50px);
                opacity: 0;
            }

            60% {
                transform: translateY(5px);
                opacity: 1;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes buildSlideUp {
            0% {
                transform: translateY(100%);
                opacity: 0;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Partículas de construcción (energía ascendente) */
        .construction-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: particleRise 1.5s ease-out forwards;
        }

        @keyframes particleRise {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                transform: translateY(var(--target-y)) scale(1);
                opacity: 0;
            }
        }

        /* Líneas de energía ascendente */
        .construction-beam {
            position: absolute;
            width: 3px;
            background: linear-gradient(180deg, transparent, var(--laive-green), var(--laive-red), transparent);
            bottom: 0;
            animation: beamRise 0.8s ease-out forwards;
        }

        @keyframes beamRise {
            0% {
                height: 0;
                opacity: 1;
            }

            50% {
                height: 100vh;
                opacity: 1;
            }

            100% {
                height: 100vh;
                opacity: 0;
            }
        }

        /* Anillo de energía de construcción */
        .construction-ring {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--laive-green);
            animation: ringRise 1s ease-out forwards;
            box-shadow: 0 0 20px var(--laive-green), inset 0 0 20px var(--laive-green);
        }

        @keyframes ringRise {
            0% {
                width: 50px;
                height: 50px;
                bottom: -50px;
                opacity: 1;
            }

            50% {
                width: 150vw;
                height: 150vw;
                bottom: 50%;
                opacity: 0.5;
            }

            100% {
                width: 200vw;
                height: 200vw;
                bottom: 100%;
                opacity: 0;
            }
        }

        /* Indicador de fase */
        .phase-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--laive-red), var(--laive-green));
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(227, 6, 19, 0.4);
            animation: phaseGlow 2s ease-in-out infinite;
        }

        @keyframes phaseGlow {

            0%,
            100% {
                box-shadow: 0 4px 15px rgba(227, 6, 19, 0.4);
            }

            50% {
                box-shadow: 0 4px 25px rgba(0, 107, 63, 0.6);
            }
        }

        /* ============================================
           CELEBRACIÓN ÉPICA - FIN DE FASE 2
           ============================================ */

        /* Overlay de celebración */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.95) 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .celebration-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -20px;
            animation: confettiFall linear forwards;
        }

        .confetti.square {
            border-radius: 0;
        }

        .confetti.circle {
            border-radius: 50%;
        }

        .confetti.ribbon {
            width: 8px;
            height: 20px;
            border-radius: 2px;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(var(--rotation)) scale(0.5);
                opacity: 0.7;
            }
        }

        /* Fuegos artificiales */
        .firework {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: fireworkExplode 1s ease-out forwards;
        }

        @keyframes fireworkExplode {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }

            50% {
                opacity: 1;
            }

            100% {
                transform: translate(var(--fx), var(--fy)) scale(1);
                opacity: 0;
            }
        }

        /* Luces de discoteca */
        .disco-lights {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .disco-light {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            filter: blur(80px);
            animation: discoMove 3s ease-in-out infinite;
        }

        .disco-light:nth-child(1) {
            background: rgba(227, 6, 19, 0.4);
            top: -10%;
            left: -10%;
            animation-delay: 0s;
        }

        .disco-light:nth-child(2) {
            background: rgba(0, 107, 63, 0.4);
            top: -10%;
            right: -10%;
            animation-delay: 0.5s;
        }

        .disco-light:nth-child(3) {
            background: rgba(255, 215, 0, 0.4);
            bottom: -10%;
            left: 30%;
            animation-delay: 1s;
        }

        .disco-light:nth-child(4) {
            background: rgba(78, 205, 196, 0.4);
            bottom: -10%;
            right: -10%;
            animation-delay: 1.5s;
        }

        @keyframes discoMove {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            25% {
                transform: translate(50px, 30px) scale(1.2);
            }

            50% {
                transform: translate(-30px, 50px) scale(0.8);
            }

            75% {
                transform: translate(30px, -30px) scale(1.1);
            }
        }

        /* Estrellas brillantes */
        .sparkle-star {
            position: absolute;
            width: 20px;
            height: 20px;
            animation: sparkleTwinkle 1s ease-in-out infinite;
        }

        .sparkle-star::before,
        .sparkle-star::after {
            content: '';
            position: absolute;
            background: white;
        }

        .sparkle-star::before {
            width: 100%;
            height: 4px;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            border-radius: 2px;
        }

        .sparkle-star::after {
            width: 4px;
            height: 100%;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        @keyframes sparkleTwinkle {

            0%,
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }

            50% {
                transform: scale(1.5) rotate(45deg);
                opacity: 0.5;
            }
        }

        /* Contenido de celebración */
        .celebration-content {
            text-align: center;
            z-index: 10001;
            animation: celebrationBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes celebrationBounce {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 0;
            }

            60% {
                transform: scale(1.1) rotate(2deg);
                opacity: 1;
            }

            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .celebration-trophy {
            font-size: 8rem;
            margin-bottom: 1rem;
            animation: trophyBounce 1s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));
        }

        @keyframes trophyBounce {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-20px) scale(1.1);
            }
        }

        .celebration-title {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, #FFD700, #FFA500, #FF6347, #FFD700);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 2s ease-in-out infinite;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 1rem;
            text-shadow: none;
        }

        @keyframes goldShimmer {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .celebration-subtitle {
            font-size: 2rem;
            color: white;
            font-weight: 600;
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 0.5s forwards;
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .celebration-stats {
            display: flex;
            gap: 3rem;
            justify-content: center;
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 0.7s forwards;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 3rem;
            font-weight: 900;
            color: var(--laive-green);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .celebration-message {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            max-width: 500px;
            margin: 0 auto 2rem;
            line-height: 1.6;
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 0.9s forwards;
        }

        .celebration-countdown {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 1.1s forwards;
        }

        .celebration-countdown span {
            font-size: 2rem;
            font-weight: 900;
            color: var(--laive-red);
        }

        .celebration-btn {
            padding: 1.2rem 3rem;
            font-size: 1.1rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(135deg, var(--laive-green), #00a86b);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(0, 107, 63, 0.5);
            opacity: 0;
            animation: fadeInUp 0.5s ease-out 1.3s forwards;
        }

        .celebration-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 40px rgba(0, 107, 63, 0.6);
        }

        /* Rayos de luz desde el centro */
        .light-rays {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .light-ray {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 3px;
            height: 150vh;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%);
            transform-origin: top center;
            animation: rayRotate 20s linear infinite;
        }

        @keyframes rayRotate {
            0% {
                transform: rotate(var(--start-angle));
            }

            100% {
                transform: rotate(calc(var(--start-angle) + 360deg));
            }
        }

        /* Pulso de celebración en el fondo */
        .celebration-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: celebrationPulse 2s ease-out infinite;
        }

        @keyframes celebrationPulse {
            0% {
                width: 100px;
                height: 100px;
                opacity: 0.8;
            }

            100% {
                width: 200vw;
                height: 200vw;
                opacity: 0;
            }
        }

        /* ============================================
           OVERTIME WARNING OVERLAY - FASE 2
           ============================================ */

        .overtime-warning-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(227, 6, 19, 0.97) 0%, rgba(139, 0, 0, 0.98) 100%);
            z-index: 10001;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .overtime-warning-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .overtime-warning-icon {
            font-size: 8rem;
            margin-bottom: 1rem;
            animation: warningBounce 0.8s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.5));
        }

        @keyframes warningBounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.15);
            }
        }

        .overtime-title {
            font-size: 5rem;
            font-weight: 900;
            color: white;
            text-transform: uppercase;
            letter-spacing: 8px;
            margin-bottom: 1rem;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            animation: titlePulse 1.5s ease-in-out infinite;
        }

        @keyframes titlePulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.85;
                transform: scale(1.02);
            }
        }

        .overtime-timer {
            font-size: 18rem;
            font-weight: 900;
            color: white;
            font-variant-numeric: tabular-nums;
            text-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
            letter-spacing: 12px;
            animation: timerGlow 1s ease-in-out infinite;
        }

        @keyframes timerGlow {

            0%,
            100% {
                text-shadow: 0 8px 40px rgba(0, 0, 0, 0.5), 0 0 60px rgba(255, 255, 255, 0.3);
            }

            50% {
                text-shadow: 0 8px 40px rgba(0, 0, 0, 0.5), 0 0 100px rgba(255, 255, 255, 0.5);
            }
        }

        .overtime-subtitle {
            font-size: 2.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            margin-top: 1rem;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .overtime-extra-time {
            font-size: 3rem;
            color: #FFD700;
            font-weight: 800;
            margin-top: 2rem;
            padding: 1rem 3rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            border: 3px solid #FFD700;
            animation: extraTimePulse 0.5s ease-in-out infinite;
        }

        @keyframes extraTimePulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
            }
        }

        .overtime-instruction {
            font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 3rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: fadeInOut 2s ease-in-out infinite;
        }

        @keyframes fadeInOut {

            0%,
            100% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }
        }

        /* Overtime completion screen (when paused during overtime) */
        .overtime-completion-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(75, 85, 99, 0.98) 0%, rgba(31, 41, 55, 0.99) 100%);
            z-index: 10001;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .overtime-completion-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .overtime-completion-icon {
            font-size: 6rem;
            margin-bottom: 1.5rem;
        }

        .overtime-completion-title {
            font-size: 3.5rem;
            font-weight: 900;
            color: #F59E0B;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .overtime-completion-stats {
            display: flex;
            gap: 4rem;
            margin: 2rem 0;
        }

        .overtime-stat {
            text-align: center;
        }

        .overtime-stat-value {
            font-size: 4rem;
            font-weight: 900;
            color: var(--laive-red);
        }

        .overtime-stat-label {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .overtime-completion-message {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            max-width: 600px;
            text-align: center;
            line-height: 1.6;
            margin: 1.5rem 0;
        }

        .overtime-completion-btn {
            padding: 1.2rem 3rem;
            font-size: 1.1rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: var(--laive-green);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .overtime-completion-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 40px rgba(0, 107, 63, 0.6);
        }

        /* ========================================
           MEDIA QUERIES - RESPONSIVE DESIGN
           ======================================== */

        /* FULL HD (1920px) */
        @media screen and (min-width: 1920px) {
            .sidebar {
                width: 20%;
                max-width: 400px;
                padding: 2rem;
            }

            .timer-display {
                font-size: 7rem;
            }

            .task-text {
                font-size: 4rem;
            }

            .project-title {
                font-size: 2rem;
            }
        }

        /* LAPTOPS GRANDES (1600px - 1919px) */
        @media screen and (max-width: 1919px) and (min-width: 1600px) {
            .sidebar {
                width: 22%;
                padding: 1.5rem;
            }

            .timer-display {
                font-size: 6rem;
            }

            .task-text {
                font-size: 3.5rem;
            }
        }

        /* LAPTOPS (1366px - 1599px) */
        @media screen and (max-width: 1599px) and (min-width: 1366px) {
            .sidebar {
                width: 24%;
                min-width: 260px;
                padding: 1.25rem;
            }

            .logo-container {
                width: 200px;
                height: 140px;
            }

            .project-title {
                font-size: 1.6rem;
            }

            .timer-display {
                font-size: 5.5rem;
            }

            .task-card {
                padding: 1.25rem;
            }

            .task-text {
                font-size: 3rem;
            }

            .task-role {
                font-size: 0.95rem;
            }

            .main-content {
                padding: 1.25rem;
                gap: 1rem;
            }

            .my-company-logo {
                max-width: 240px;
                max-height: 140px;
            }
        }

        /* LAPTOPS PEQUEÑAS (1200px - 1365px) */
        @media screen and (max-width: 1365px) and (min-width: 1200px) {
            .sidebar {
                width: 26%;
                min-width: 240px;
                padding: 1rem;
            }

            .logo-container {
                width: 180px;
                height: 120px;
                margin-bottom: 1rem;
            }

            .project-title {
                font-size: 1.4rem;
            }

            .timer-display {
                font-size: 5rem;
            }

            .timer-section {
                padding: 1.5rem;
            }

            .task-card {
                padding: 1rem;
            }

            .task-text {
                font-size: 2.8rem;
            }

            .task-role {
                font-size: 0.9rem;
            }

            .task-content {
                min-height: 80px;
                padding: 0.75rem 0;
            }

            .main-content {
                padding: 1rem;
                gap: 0.75rem;
            }

            .tasks-grid {
                gap: 1rem;
            }

            .my-company-logo {
                max-width: 200px;
                max-height: 120px;
            }

            .team-section-title {
                font-size: 0.85rem;
                padding: 1rem;
            }

            .member-name {
                font-size: 0.9rem;
            }
        }

        /* TABLETS Y PANTALLAS PEQUEÑAS (1024px - 1199px) */
        @media screen and (max-width: 1199px) and (min-width: 1024px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-width: 100%;
                min-width: auto;
                border-right: none;
                border-bottom: 1px solid #E5E5E5;
                padding: 1rem;
                max-height: 280px;
                overflow-y: auto;
            }

            .sidebar-content {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                align-items: flex-start;
            }

            .sidebar-header {
                flex: 0 0 250px;
                margin-bottom: 0;
                padding-bottom: 0;
                border-bottom: none;
            }

            .team-section {
                flex: 1;
                display: flex;
                gap: 1rem;
            }

            .team-group {
                flex: 1;
                margin-bottom: 0;
            }

            .logo-container {
                width: 150px;
                height: 100px;
            }

            .project-title {
                font-size: 1.3rem;
            }

            .my-company-container {
                margin-top: 0.5rem !important;
            }

            .my-company-logo {
                max-width: 150px;
                max-height: 90px;
            }

            .main-content {
                flex: 1;
                padding: 1rem;
            }

            .timer-display {
                font-size: 4.5rem;
            }

            .timer-section {
                padding: 1.25rem;
            }

            .task-text {
                font-size: 2.5rem;
            }

            .task-card {
                padding: 1rem;
            }

            .task-timer-container {
                padding: 0.5rem;
            }

            .task-timer-duration {
                font-size: 1.1rem;
            }

            .task-timer-elapsed {
                font-size: 1.3rem;
            }

            .bottom-progress {
                padding: 0.75rem 1rem;
            }

            .bottom-progress-value {
                font-size: 2rem;
            }
        }

        /* TABLETS PEQUEÑAS (768px - 1023px) */
        @media screen and (max-width: 1023px) and (min-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-width: 100%;
                border-right: none;
                border-bottom: 1px solid #E5E5E5;
                padding: 0.75rem;
                max-height: 250px;
            }

            .sidebar-header {
                display: flex;
                align-items: center;
                gap: 1rem;
                margin-bottom: 0.5rem;
                padding-bottom: 0.5rem;
            }

            .logo-container {
                width: 100px;
                height: 70px;
                margin: 0;
            }

            .project-title {
                font-size: 1.1rem;
                margin-bottom: 0;
            }

            .my-company-container {
                display: none;
            }

            .team-section {
                display: flex;
                gap: 0.5rem;
            }

            .team-group {
                flex: 1;
                padding: 0.75rem;
                margin-bottom: 0;
            }

            .team-section-title {
                display: none;
            }

            .main-content {
                padding: 0.75rem;
                gap: 0.5rem;
            }

            .logistics-banner {
                padding: 0.75rem 1rem;
            }

            .logistics-content {
                height: 50px;
            }

            .logistics-text {
                font-size: 1.2rem;
            }

            .timer-display {
                font-size: 4rem;
            }

            .timer-section {
                padding: 1rem;
            }

            .tasks-grid {
                gap: 0.75rem;
            }

            .task-card {
                padding: 0.75rem;
            }

            .task-text {
                font-size: 2.2rem;
            }

            .task-role {
                font-size: 0.85rem;
            }

            .task-content {
                min-height: 60px;
            }

            .control-btn {
                padding: 0.75rem 1.5rem;
                font-size: 0.85rem;
            }

            .bottom-progress-value {
                font-size: 1.8rem;
            }
        }

        /* MÓVILES (menos de 768px) */
        @media screen and (max-width: 767px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-height: 200px;
                padding: 0.5rem;
            }

            .sidebar-header {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .logo-container {
                width: 80px;
                height: 55px;
                margin: 0;
            }

            .project-title {
                font-size: 1rem;
            }

            .my-company-container,
            .team-section {
                display: none;
            }

            .main-content {
                padding: 0.5rem;
                gap: 0.5rem;
            }

            .logistics-banner {
                display: none;
            }

            .timer-display {
                font-size: 3rem;
            }

            .timer-section {
                padding: 0.75rem;
            }

            .tasks-grid {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .task-card {
                padding: 0.5rem;
            }

            .task-text {
                font-size: 1.8rem;
            }

            .task-timer-container {
                flex-direction: column;
                gap: 0.5rem;
            }

            .task-timer-separator {
                display: none;
            }

            .controls-section {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .control-btn {
                padding: 0.5rem 1rem;
                font-size: 0.75rem;
                flex: 1;
                min-width: 100px;
            }

            .bottom-progress {
                padding: 0.5rem;
            }

            .bottom-progress-value {
                font-size: 1.5rem;
            }

            .bottom-time-display {
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>
    <!-- EFECTO DE NIEVE -->
    <div class="snowflakes">
        <div class="snowflake">❄</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❆</div>
        <div class="snowflake">❄</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❆</div>
        <div class="snowflake">❄</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❆</div>
        <div class="snowflake">❄</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❆</div>
        <div class="snowflake">❄</div>
        <div class="snowflake">❅</div>
        <div class="snowflake">❆</div>
    </div>

    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <div class="page-alert" id="pageAlert"></div>

    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <div class="logo-container">
                        <!-- Agrega tu logo aquí -->
                        <img src="img/Diseño sin título (5).png" alt="Logo Laive">
                    </div>
                    <h1 class="project-title">SETUP TEST 1.0 - LAIVE</h1>

                    <!-- SECCIÓN PATROCINADO POR -->
                    <div class="my-company-container" style="margin-top: 1rem;">
                        <span class="my-company-label">◆ PATROCINADO POR ◆</span>
                        <!-- Tu logo de empresa -->
                        <img src="img/logoempresa.png" alt="Logo de mi empresa" class="my-company-logo"
                            style="display: none;"
                            onload="this.style.display='block'; this.nextElementSibling.style.display='none';">
                        <div class="my-company-placeholder">□ Agrega tu logo aquí</div>
                    </div>
                </div>
                <div class="team-section">
                    <h3 class="team-section-title">El Equipo</h3>
                    <div class="team-group">
                        <div class="team-group-header">
                            <div class="team-group-icon"><svg viewBox="0 0 24 24">
                                    <path
                                        d="M21 16.5C21 16.88 20.79 17.21 20.47 17.38L12.57 21.82C12.41 21.94 12.21 22 12 22C11.79 22 11.59 21.94 11.43 21.82L3.53 17.38C3.21 17.21 3 16.88 3 16.5V7.5C3 7.12 3.21 6.79 3.53 6.62L11.43 2.18C11.59 2.06 11.79 2 12 2C12.21 2 12.41 2.06 12.57 2.18L20.47 6.62C20.79 6.79 21 7.12 21 7.5V16.5M12 4.15L6.04 7.5L12 10.85L17.96 7.5L12 4.15M5 15.91L11 19.29V12.58L5 9.21V15.91M19 15.91V9.21L13 12.58V19.29L19 15.91Z" />
                                </svg></div>
                            <span class="team-group-name">Grupo Envasadora</span>
                        </div>
                        <div class="team-members">
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Maquinista Envasado</span>
                                    <div class="member-tasks-list" id="tasks-maquinista">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocación de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Ayudante Envasado</span>
                                    <div class="member-tasks-list" id="tasks-ayudante">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocación de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Purgar línea nitrógeno (3 min)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="team-group">
                        <div class="team-group-header">
                            <div class="team-group-icon red"><svg viewBox="0 0 24 24">
                                    <path
                                        d="M22.7 19L13.6 9.9C14.5 7.6 14 4.9 12.1 3C10.1 1 7.1 .6 4.7 1.7L9 6L6 9L1.6 4.7C.4 7.1 .9 10.1 2.9 12.1C4.8 14 7.5 14.5 9.8 13.6L18.9 22.7C19.3 23.1 19.9 23.1 20.3 22.7L22.6 20.4C23.1 20 23.1 19.3 22.7 19Z" />
                                </svg></div>
                            <span class="team-group-name">Grupo Tapadora</span>
                        </div>
                        <div class="team-members">
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Paletizador 1</span>
                                    <div class="member-tasks-list" id="tasks-paletizador1">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocación de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Paletizador 2</span>
                                    <div class="member-tasks-list" id="tasks-paletizador2">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocación de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <section class="logistics-banner">
                <div class="logistics-header">
                    <div class="logistics-icon-wrapper">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M18 18.5C18.83 18.5 19.5 17.83 19.5 17C19.5 16.17 18.83 15.5 18 15.5C17.17 15.5 16.5 16.17 16.5 17C16.5 17.83 17.17 18.5 18 18.5M19.5 9.5L21.46 12H17V9.5H19.5M6 18.5C6.83 18.5 7.5 17.83 7.5 17C7.5 16.17 6.83 15.5 6 15.5C5.17 15.5 4.5 16.17 4.5 17C4.5 17.83 5.17 18.5 6 18.5M20 8H17V4H3C1.89 4 1 4.89 1 6V17H3C3 18.66 4.34 20 6 20S9 18.66 9 17H15C15 18.66 16.34 20 18 20S21 18.66 21 17H23V12L20 8Z" />
                        </svg>
                    </div>
                    <div class="logistics-title-group">
                        <span class="logistics-label">Operaciones</span>
                        <span class="logistics-title">Logística General (Todos)</span>
                    </div>
                </div>
                <div class="logistics-content">
                    <p class="logistics-text active"><span class="icon-task"><svg viewBox="0 0 24 24"
                                class="icon-green">
                                <path
                                    d="M19,3H5C3.89,3,3,3.89,3,5v14c0,1.1,0.89,2,2,2h14c1.1,0,2-0.9,2-2V5C20,3.89,19.1,3,19,3z M19,19H5V5h14V19z M17,12 H7v-2h10V12z M13,16H7v-2h6V16z M17,8H7V6h10V8z" />
                            </svg></span>Traer detergente, esponjas verdes y paños (7')</p>
                    <p class="logistics-text"><span class="icon-task"><svg viewBox="0 0 24 24" class="icon-green">
                                <path
                                    d="M12,6v3l4-4l-4-4v3c-4.42,0-8,3.58-8,8c0,1.57,0.46,3.03,1.24,4.26L6.7,14.8c-0.45-0.83-0.7-1.79-0.7-2.8 c0-3.31,2.69-6,6-6z M18.76,7.74L17.3,9.2c0.44,0.84,0.7,1.79,0.7,2.8c0,3.31-2.69,6-6,6v-3l-4,4l4,4v-3c4.42,0,8-3.58,8-8 C20,10.43,19.54,8.97,18.76,7.74z" />
                            </svg></span>Repartir materiales a los equipos</p>
                    <p class="logistics-text"><span class="icon-task"><svg viewBox="0 0 24 24" class="icon-green">
                                <path
                                    d="M12,2C8.13,2,5,5.13,5,9c0,5.25,7,13,7,13s7-7.75,7-13C19,5.13,15.87,2,12,2z M12,11.5c-1.38,0-2.5-1.12-2.5-2.5 s1.12-2.5,2.5-2.5s2.5,1.12,2.5,2.5S13.38,11.5,12,11.5z" />
                            </svg></span>Colocar en punto de uso: utensilios, baldes, coches</p>
                </div>
            </section>

            <section class="timer-section" id="timerSection">
                <div class="timer-display" id="timerDisplay">00:00</div>
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar progress-green" id="progressBar" style="width: 0%;"></div>
                    <div class="progress-handle" id="progressHandle" style="left: 0;"></div>
                </div>
                <div class="progress-labels"><span>00:00</span><span>14:30</span><span>24:39</span><span>29:00</span>
                </div>
            </section>

            <section class="tasks-grid">
                <div class="task-card card-blue active-task" id="card1">
                    <div class="task-card-progress" id="progress1"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Maquinista Envasado</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task1">● Colocación de EPPs</p>
                        </div>
                        <div class="task-timer-container">
                            <div class="task-timer-left">
                                <span class="task-timer-label"><span class="icon-task"><svg viewBox="0 0 24 24"
                                            class="icon-green">
                                            <path
                                                d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M9.5,16.5v-9l7,4.5L9.5,16.5z" />
                                        </svg></span>Duración</span>
                                <span class="task-timer-duration" id="duration1">5 min</span>
                            </div>
                            <div class="task-timer-separator"></div>
                            <div class="task-timer-right">
                                <span class="task-timer-label"><span class="icon-task"><svg viewBox="0 0 24 24"
                                            class="icon-green">
                                            <path
                                                d="M15,1H9v2h6V1z M11,14h2V8h-2V14z M19.03,7.39l1.42-1.42c-0.43-0.51-0.9-0.99-1.41-1.41l-1.42,1.42 C16.07,4.74,14.12,4,12,4c-4.97,0-9,4.03-9,9s4.02,9,9,9s9-4.03,9-9C21,10.88,20.26,8.93,19.03,7.39z M12,20c-3.87,0-7-3.13-7-7 s3.13-7,7-7s7,3.13,7,7S15.87,20,12,20z" />
                                        </svg></span>Transcurrido</span>
                                <span class="task-timer-elapsed" id="elapsed1">0:00</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="task-card card-purple active-task" id="card2">
                    <div class="task-card-progress" id="progress2"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Ayudante Envasado</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task2">● Colocación de EPPs</p>
                        </div>
                        <div class="task-timer-container">
                            <div class="task-timer-left">
                                <span class="task-timer-label">▶ Duración</span>
                                <span class="task-timer-duration" id="duration2">5 min</span>
                            </div>
                            <div class="task-timer-separator"></div>
                            <div class="task-timer-right">
                                <span class="task-timer-label">▷ Transcurrido</span>
                                <span class="task-timer-elapsed" id="elapsed2">0:00</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="task-card card-cyan active-task" id="card3">
                    <div class="task-card-progress" id="progress3"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Paletizador 1</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task3">● Colocación de EPPs</p>
                        </div>
                        <div class="task-timer-container">
                            <div class="task-timer-left">
                                <span class="task-timer-label">▶ Duración</span>
                                <span class="task-timer-duration" id="duration3">5 min</span>
                            </div>
                            <div class="task-timer-separator"></div>
                            <div class="task-timer-right">
                                <span class="task-timer-label">▷ Transcurrido</span>
                                <span class="task-timer-elapsed" id="elapsed3">0:00</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="task-card card-green active-task" id="card4">
                    <div class="task-card-progress" id="progress4"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Paletizador 2</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task4">● Colocación de EPPs</p>
                        </div>
                        <div class="task-timer-container">
                            <div class="task-timer-left">
                                <span class="task-timer-label">▶ Duración</span>
                                <span class="task-timer-duration" id="duration4">5 min</span>
                            </div>
                            <div class="task-timer-separator"></div>
                            <div class="task-timer-right">
                                <span class="task-timer-label">▷ Transcurrido</span>
                                <span class="task-timer-elapsed" id="elapsed4">0:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="controls-section">
                <button class="control-btn btn-start" onclick="startTimer()"><span>▶</span> Iniciar</button>
                <button class="control-btn btn-pause" id="btnPause" onclick="togglePause()"><span
                        id="pauseIcon">⏸</span> <span id="pauseText">Pausar</span></button>
                <button class="control-btn btn-reset" onclick="resetTimer()"><span>↺</span> Reiniciar</button>
                <button class="control-btn btn-fullscreen" id="btnFullscreen" onclick="toggleFullscreen()"><span
                        id="fullscreenIcon">⛶</span> <span id="fullscreenText">Pantalla Completa</span></button>
            </section>
        </main>
    </div>

    <!-- BARRA FLOTANTE DE CONTROLES - ESQUINA SUPERIOR DERECHA -->
    <div class="floating-controls" id="floatingControls">
        <button class="floating-btn btn-start" onclick="startTimer()" data-tooltip="Iniciar">▶</button>
        <button class="floating-btn btn-pause" id="floatingPause" onclick="togglePause()"
            data-tooltip="Pausar">⏸</button>
        <button class="floating-btn btn-reset" onclick="resetTimer()" data-tooltip="Reiniciar">↺</button>
        <button class="floating-btn btn-fullscreen" id="floatingFullscreen" onclick="toggleFullscreen()"
            data-tooltip="Pantalla Completa">⛶</button>
        <div style="width: 2px; height: 30px; background: #E5E5E5; margin: 0 0.5rem;"></div>
        <button class="floating-btn btn-complete-phase" id="btnCompletePhase" onclick="triggerPhaseComplete()"
            data-tooltip="Completar Fase">
            <span id="phaseCompleteText">✓ FASE 1</span>
        </button>
    </div>

    <!-- BARRA DE PROGRESO INFERIOR FIJA -->
    <div class="bottom-progress">
        <div class="bottom-progress-content">
            <div class="bottom-progress-info">
                <span class="bottom-progress-label">Progreso</span>
                <span class="bottom-progress-value green" id="bottomPercentage">0%</span>
            </div>
            <div class="bottom-progress-bar-wrapper">
                <div class="bottom-progress-bar-container">
                    <div class="bottom-progress-bar progress-green" id="bottomProgressBar" style="width: 0%;"></div>
                </div>
            </div>
            <div class="bottom-time-display" id="bottomTimeDisplay">00:00 / 29:00</div>
        </div>
    </div>

    <div class="modal-overlay" id="completionModal">
        <div class="modal-content" id="modalContent">
            <div class="modal-icon"><svg viewBox="0 0 24 24">
                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                </svg></div>
            <h2 class="modal-title">¡FASE 1 COMPLETADA!</h2>
            <p class="modal-subtitle">Preparando siguiente fase...</p>
            <div class="modal-countdown" id="modalCountdown">10</div>
            <p class="modal-countdown-label">Continuando automáticamente...</p>
            <button class="modal-btn" id="modalContinueBtn" onclick="continueToPhase2()">Continuar</button>
        </div>
    </div>

    <script>
        /* ========================================================================
           LÓGICA PRINCIPAL DEL DASHBOARD - Desarrollado por Elmerciot
        ========================================================================
           
           Elmerciot - Sistema de Temporizador de Producción:
           Este script controla el temporizador de doble fase para monitoreo
           de tiempos de setup en línea de producción LAIVE.
           
           VARIABLES PRINCIPALES:
           - timerInterval: Controla el intervalo del temporizador
           - totalSeconds: Segundos transcurridos desde el inicio
           - currentPhase: Fase actual (1 o 2)
           - maxSeconds: Duración máxima de cada fase
           
           FASES DEL PROCESO:
           - Fase 1: 29 minutos - Preparación inicial
           - Fase 2: 80 minutos - Proceso principal
           
           © 2024 Elmerciot - Todos los derechos reservados
           NO MODIFICAR SIN AUTORIZACIÓN
        ======================================================================== */

        // Elmerciot: Variables de estado del temporizador
        let timerInterval = null, totalSeconds = 0, isPaused = false, isDragging = false;
        let currentPhase = 1;
        let maxSeconds = 29 * 60; // Elmerciot: Fase 1 = 29 min, Fase 2 = 80 min

        // Elmerciot: Estados de overtime y transición de fase
        let isOvertime = false;
        let isPhaseTransitioning = false;
        let overtimeOverlay = null;

        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressHandle = document.getElementById('progressHandle');
        const timerDisplay = document.getElementById('timerDisplay');
        const timerSection = document.getElementById('timerSection');
        const pageAlert = document.getElementById('pageAlert');
        const bottomPercentage = document.getElementById('bottomPercentage');
        const bottomProgressBar = document.getElementById('bottomProgressBar');
        const bottomTimeDisplay = document.getElementById('bottomTimeDisplay');
        const btnPause = document.getElementById('btnPause');
        const pauseIcon = document.getElementById('pauseIcon');
        const pauseText = document.getElementById('pauseText');
        const logisticsTexts = document.querySelectorAll('.logistics-text');
        let currentLogisticsIndex = 0;

        setInterval(() => {
            logisticsTexts.forEach(t => t.classList.remove('active'));
            currentLogisticsIndex = (currentLogisticsIndex + 1) % logisticsTexts.length;
            logisticsTexts[currentLogisticsIndex].classList.add('active');
        }, 5000);

        function getPositionFromEvent(e) {
            const rect = progressContainer.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            return Math.max(0, Math.min(clientX - rect.left, rect.width)) / rect.width;
        }

        function updateFromPosition(p) {
            totalSeconds = Math.round(p * maxSeconds);
            updateDisplay();
        }

        function updateHandlePosition() {
            const pct = (totalSeconds / maxSeconds) * 100;
            const pos = (pct / 100) * progressContainer.offsetWidth - 12;
            progressHandle.style.left = `${Math.max(0, Math.min(pos, progressContainer.offsetWidth - 24))}px`;
        }

        progressContainer.addEventListener('mousedown', e => { isDragging = true; updateFromPosition(getPositionFromEvent(e)); });
        document.addEventListener('mousemove', e => { if (isDragging) { updateFromPosition(getPositionFromEvent(e)); } });
        document.addEventListener('mouseup', () => { isDragging = false; });

        progressContainer.addEventListener('touchstart', e => { isDragging = true; updateFromPosition(getPositionFromEvent(e)); }, { passive: true });
        document.addEventListener('touchmove', e => { if (isDragging) updateFromPosition(getPositionFromEvent(e)); }, { passive: true });
        document.addEventListener('touchend', () => { isDragging = false; });

        function formatTime(s) { return `${String(Math.floor(s / 60)).padStart(2, '0')}:${String(s % 60).padStart(2, '0')}`; }

        function updateDisplay() {
            timerDisplay.textContent = formatTime(totalSeconds);
            updateProgressBar();
            updateBottomProgress();
            updateHandlePosition();
            updateTasks();
            updateAlertState();
        }

        function updateTimer() {
            // Phase 1: Stop at maxSeconds and show completion modal
            if (currentPhase === 1 && totalSeconds >= maxSeconds) {
                if (!isPhaseTransitioning) {
                    isPhaseTransitioning = true;
                    stopTimer();
                    showCompletionModal();
                }
                return;
            }

            // Phase 2: Continue past maxSeconds (overtime mode)
            if (currentPhase === 2 && totalSeconds >= maxSeconds && !isOvertime) {
                isOvertime = true;
                showOvertimeWarning();
            }

            // Phase 2: Update overtime overlay if active
            if (isOvertime && overtimeOverlay) {
                updateOvertimeDisplay();
            }

            totalSeconds++;
            updateDisplay();
        }

        function updateAlertState() {
            const pct = (totalSeconds / maxSeconds) * 100;
            pageAlert.classList.remove('warning', 'critical');
            timerSection.classList.remove('warning', 'critical');
            timerDisplay.classList.remove('green', 'warning', 'critical');

            // Sincronizado con las barras: verde < 50%, amarillo 50-85%, rojo >= 85%
            if (pct >= 85) {
                pageAlert.classList.add('critical');
                timerSection.classList.add('critical');
                timerDisplay.classList.add('critical');
            } else if (pct >= 50) {
                pageAlert.classList.add('warning');
                timerSection.classList.add('warning');
                timerDisplay.classList.add('warning');
            } else {
                timerDisplay.classList.add('green');
            }
        }

        function updateBottomProgress() {
            const pct = (totalSeconds / maxSeconds) * 100;
            bottomPercentage.textContent = `${Math.round(pct)}%`;
            bottomProgressBar.style.width = `${pct}%`;
            const maxMinutes = Math.floor(maxSeconds / 60);
            bottomTimeDisplay.textContent = `${formatTime(totalSeconds)} / ${maxMinutes}:00`;

            bottomPercentage.classList.remove('green', 'yellow', 'red');
            bottomProgressBar.classList.remove('progress-green', 'progress-yellow', 'progress-red');

            if (pct < 50) { bottomPercentage.classList.add('green'); bottomProgressBar.classList.add('progress-green'); }
            else if (pct < 85) { bottomPercentage.classList.add('yellow'); bottomProgressBar.classList.add('progress-yellow'); }
            else { bottomPercentage.classList.add('red'); bottomProgressBar.classList.add('progress-red'); }
        }

        function startTimer() { if (timerInterval) return; timerInterval = setInterval(updateTimer, 1000); isPaused = false; updatePauseButton(); }
        function stopTimer() { if (timerInterval) { clearInterval(timerInterval); timerInterval = null; } }
        function togglePause() {
            if (timerInterval) {
                stopTimer();
                isPaused = true;

                // If pausing during overtime, show overtime completion screen
                if (isOvertime && currentPhase === 2) {
                    hideOvertimeWarning();
                    showOvertimeCompletion();
                }
            } else if (isPaused || totalSeconds > 0) {
                // Don't resume if showing overtime completion
                if (!document.querySelector('.overtime-completion-overlay.active')) {
                    timerInterval = setInterval(updateTimer, 1000);
                    isPaused = false;
                }
            }
            updatePauseButton();
        }

        function updatePauseButton() {
            if (isPaused || (!timerInterval && totalSeconds > 0)) { pauseIcon.textContent = '▶'; pauseText.textContent = 'Reanudar'; btnPause.classList.add('is-paused'); }
            else { pauseIcon.textContent = '⏸'; pauseText.textContent = 'Pausar'; btnPause.classList.remove('is-paused'); }
        }

        function resetTimer() {
            stopTimer();
            totalSeconds = 0;
            isPaused = false;
            isOvertime = false;
            hideOvertimeWarning();
            hideOvertimeCompletion();
            updateDisplay();
            updatePauseButton();
        }

        function updateProgressBar() {
            const pct = (totalSeconds / maxSeconds) * 100;
            progressBar.style.width = `${pct}%`;
            progressBar.classList.remove('progress-green', 'progress-yellow', 'progress-red');
            progressBar.classList.add(pct < 50 ? 'progress-green' : pct < 85 ? 'progress-yellow' : 'progress-red');
        }

        /* ========================================================================
           DEFINICIONES DE TAREAS - Configurado por Elmerciot
        ========================================================================
           
           Elmerciot - Estructura de Tareas por Fase:
           Cada tarea está definida por minuto de inicio y descripción.
           El sistema automáticamente muestra la tarea correspondiente
           según el tiempo transcurrido.
           
           FORMATO: { minuto: "descripción de la tarea" }
           
           task1 = Maquinista Envasado
           task2 = Ayudante Envasado
           task3 = Paletizador 1
           task4 = Paletizador 2
           
           © 2024 Elmerciot - NO MODIFICAR LAS TAREAS SIN AUTORIZACIÓN
        ======================================================================== */

        // Elmerciot: Tareas de la Fase 1 (29 minutos) - Preparación inicial
        const phase1Tasks = {
            task1: { 0: "Colocación de EPPs", 5: "Lavado de dosificadores griego", 25: "Tiempo Libre / Espera" },
            task2: { 0: "Colocación de EPPs", 5: "Lavado de dosificadores griego", 25: "Purgar línea nitrógeno (3 min)" },
            task3: { 0: "Colocación de EPPs", 5: "Lavado de dosificadores griego", 25: "Tiempo Libre / Espera" },
            task4: { 0: "Colocación de EPPs", 5: "Lavado de dosificadores griego", 25: "Tiempo Libre / Espera" }
        };

        // Elmerciot: Tareas de la Fase 2 (80 minutos) - Proceso principal
        const phase2Tasks = {
            task1: {
                0: "Tiempo Libre / Espera",
                3: "Retirar estrella (ENJUAGUE)",
                4: "Colocar estrella (ENJUAGUE)",
                7: "SALIR AFUERA: SODA + ÁCIDO + DISIPADO (21 min)",
                28: "Lavar externa de tolva",
                31: "Armar dosificadores",
                40: "Tiempo Libre / Espera (ENJUAGUE 2)",
                45: "Limpiar y colocar filtro (HISOPADO)",
                48: "Tiempo Libre / Espera (ESTERILIZADO)",
                56: "Conectar jumpers",
                59: "Enviar aire estéril",
                62: "Purgar agua + montar dosificadores",
                66: "Desinfectar dosificadores",
                68: "Purgar yogurt",
                72: "Ajustar peso y velocidad hasta 59 BPM"
            },
            task2: {
                0: "Tiempo Libre / Espera",
                3: "Estrangular conexiones (ENJUAGUE)",
                4: "Retirar estrella (ENJUAGUE)",
                5: "Colocar estrella (ENJUAGUE)",
                8: "SALIR AFUERA: SODA + ÁCIDO + DISIPADO (20 min)",
                28: "Presionar JOG",
                31: "Armar dosificadores",
                40: "Tiempo Libre / Espera (ENJUAGUE 2)",
                45: "Ayudar en hisopado",
                48: "Tiempo Libre / Espera (ESTERILIZADO)",
                56: "Calibración de guías con botella",
                59: "Enfriar, lubricar pisadores",
                64: "Tiempo Libre",
                66: "Secado de platillos",
                69: "Tiempo Libre",
                72: "Ajustar peso y velocidad hasta 59 BPM"
            },
            task3: {
                0: "Retirar tapas",
                4: "Retirar estrella tapadora (ENJUAGUE)",
                5: "Cerrar nitrógeno gas y cubrir boquilla",
                8: "SALIR AFUERA: SODA + ÁCIDO + DISIPADO (20 min)",
                28: "Secar pisos",
                33: "Lavar tapadora",
                40: "Tiempo Libre (Durante ENJ/HIS/EST)",
                56: "Secado boquilla + inspección T°",
                59: "Apertura de nitrógeno gas",
                62: "Secar paredes y techo (10 min)",
                72: "Tiempo Libre",
                75: "Apertura de nitrógeno líquido"
            },
            task4: {
                0: "Tiempo Libre / Espera",
                4: "Cambiar topes de media luna",
                5: "SALIR AFUERA: SODA + ÁCIDO + DISIPADO (23 min)",
                28: "Secar pisos",
                33: "Lavar tapadora",
                40: "Tiempo Libre (Durante ENJ/HIS/EST)",
                56: "Secar pisos",
                59: "Secar paredes y techo",
                67: "Tiempo Libre / Final"
            }
        };

        // Tareas activas según la fase actual
        let taskDefinitions = phase1Tasks;

        function getTaskForMinute(id, m) {
            let t = taskDefinitions[id][0];
            for (const min in taskDefinitions[id]) {
                if (m >= parseInt(min)) t = taskDefinitions[id][min];
            }
            return t;
        }

        let previousTasks = {};

        // Obtener los límites de tiempo de la tarea actual para cada tarjeta
        function getTaskTimeRange(id, currentMinute) {
            const times = Object.keys(taskDefinitions[id]).map(Number).sort((a, b) => a - b);
            let startMin = 0;
            let endMin = Math.floor(maxSeconds / 60); // Usar maxSeconds dinámico

            for (let i = 0; i < times.length; i++) {
                if (currentMinute >= times[i]) {
                    startMin = times[i];
                    endMin = times[i + 1] !== undefined ? times[i + 1] : Math.floor(maxSeconds / 60);
                }
            }

            return { startMin, endMin };
        }

        // Actualizar barras de progreso basado en cada fase de tarea
        function updateCardProgressBars() {
            const currentMinute = Math.floor(totalSeconds / 60);

            for (let i = 1; i <= 4; i++) {
                const progressEl = document.getElementById('progress' + i);
                const card = document.getElementById('card' + i);
                const taskId = 'task' + i;

                if (progressEl && card) {
                    if (card.classList.contains('idle')) {
                        // Ocultar barra en tarjetas idle y quitar temblor
                        progressEl.style.width = '0%';
                        progressEl.classList.remove('card-progress-green', 'card-progress-yellow', 'card-progress-red');
                        card.classList.remove('card-shake');
                    } else {
                        // Calcular progreso dentro de esta fase
                        const { startMin, endMin } = getTaskTimeRange(taskId, currentMinute);
                        const phaseStartSeconds = startMin * 60;
                        const phaseEndSeconds = endMin * 60;
                        const phaseDuration = phaseEndSeconds - phaseStartSeconds;
                        const elapsedInPhase = totalSeconds - phaseStartSeconds;

                        // Porcentaje de progreso en esta fase (0-100%)
                        const pct = Math.min(100, Math.max(0, (elapsedInPhase / phaseDuration) * 100));

                        // Actualizar ancho de la barra
                        progressEl.style.width = `${pct}%`;

                        // Actualizar color según el progreso de la fase
                        progressEl.classList.remove('card-progress-green', 'card-progress-yellow', 'card-progress-red');

                        if (pct < 50) {
                            progressEl.classList.add('card-progress-green');
                            card.classList.remove('card-shake');
                        } else if (pct < 85) {
                            progressEl.classList.add('card-progress-yellow');
                            card.classList.remove('card-shake');
                        } else {
                            progressEl.classList.add('card-progress-red');
                            // Solo tiembla si NO está en idle (Tiempo Libre / Espera)
                            if (!card.classList.contains('idle')) {
                                card.classList.add('card-shake');
                            } else {
                                card.classList.remove('card-shake');
                            }
                        }
                    }
                }
            }
        }

        // Actualizar temporizadores de cada tarjeta
        function updateCardTimers() {
            const currentMinute = Math.floor(totalSeconds / 60);

            for (let i = 1; i <= 4; i++) {
                const taskId = 'task' + i;
                const durationEl = document.getElementById('duration' + i);
                const elapsedEl = document.getElementById('elapsed' + i);
                const card = document.getElementById('card' + i);

                if (durationEl && elapsedEl) {
                    const { startMin, endMin } = getTaskTimeRange(taskId, currentMinute);
                    const phaseDurationMinutes = endMin - startMin;
                    const phaseStartSeconds = startMin * 60;
                    const elapsedInPhaseSeconds = Math.max(0, totalSeconds - phaseStartSeconds);

                    // Calcular minutos y segundos transcurridos
                    const elapsedMinutes = Math.floor(elapsedInPhaseSeconds / 60);
                    const elapsedSecs = elapsedInPhaseSeconds % 60;

                    // Mostrar duración de la tarea
                    durationEl.textContent = phaseDurationMinutes + ' min';

                    // Mostrar tiempo transcurrido en formato M:SS
                    elapsedEl.textContent = elapsedMinutes + ':' + String(elapsedSecs).padStart(2, '0');

                    // Calcular porcentaje para cambiar color
                    const phaseDurationSeconds = phaseDurationMinutes * 60;
                    const pct = phaseDurationSeconds > 0 ? (elapsedInPhaseSeconds / phaseDurationSeconds) * 100 : 0;

                    // Quitar clases de color anteriores
                    elapsedEl.classList.remove('warning', 'critical');

                    // Aplicar color según el progreso
                    if (!card.classList.contains('idle')) {
                        if (pct >= 85) {
                            elapsedEl.classList.add('critical');
                        } else if (pct >= 50) {
                            elapsedEl.classList.add('warning');
                        }
                    }
                }
            }
        }

        function updateTasks() {
            const m = Math.floor(totalSeconds / 60);
            for (const id in taskDefinitions) {
                const task = getTaskForMinute(id, m);
                const el = document.getElementById(id);
                const cardNum = id.replace('task', '');
                const card = document.getElementById('card' + cardNum);
                const badge = card.querySelector('.task-status-badge');
                const isIdle = task.includes('Tiempo Libre') || task.includes('Espera');

                if (isIdle) {
                    card.classList.add('idle');
                    card.classList.remove('active-task');
                    badge.textContent = 'En Espera';
                } else {
                    card.classList.remove('idle');
                    card.classList.add('active-task');
                    badge.textContent = 'Activo';
                }

                if (previousTasks[id] !== task) {
                    el.classList.add('fade-out');
                    setTimeout(() => { el.textContent = task; el.classList.remove('fade-out'); }, 300);
                    previousTasks[id] = task;
                }
            }

            // Actualizar barras de progreso en cada tarjeta
            updateCardProgressBars();

            // Actualizar temporizadores de cada tarjeta
            updateCardTimers();

            // Actualizar listas de tareas del equipo
            updateTeamTaskLists(m);
        }

        // Actualizar listas de tareas en el sidebar del equipo
        function updateTeamTaskLists(currentMinute) {
            // Definir las tareas de cada miembro del equipo según la fase
            const phase1TeamTasks = {
                'maquinista': [
                    { name: 'Colocación de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ],
                'ayudante': [
                    { name: 'Colocación de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Purgar línea nitrógeno (3 min)', startMin: 25, endMin: 29 }
                ],
                'paletizador1': [
                    { name: 'Colocación de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ],
                'paletizador2': [
                    { name: 'Colocación de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ]
            };

            // Para Fase 2, mostrar las tareas principales de cada miembro
            const phase2TeamTasks = {
                'maquinista': [
                    { name: 'Tiempo Libre / Espera', startMin: 0, endMin: 3 },
                    { name: 'Retirar y Colocar estrella', startMin: 3, endMin: 7 },
                    { name: 'SALIR AFUERA: SODA+ÁCIDO', startMin: 7, endMin: 28 },
                    { name: 'Lavar externa de tolva', startMin: 28, endMin: 31 },
                    { name: 'Armar dosificadores', startMin: 31, endMin: 40 },
                    { name: 'Desinfectar dosificadores', startMin: 66, endMin: 68 },
                    { name: 'Ajustar peso y velocidad', startMin: 72, endMin: 80 }
                ],
                'ayudante': [
                    { name: 'Tiempo Libre / Espera', startMin: 0, endMin: 3 },
                    { name: 'Estrangular conexiones', startMin: 3, endMin: 4 },
                    { name: 'Retirar y Colocar estrella', startMin: 4, endMin: 8 },
                    { name: 'SALIR AFUERA: SODA+ÁCIDO', startMin: 8, endMin: 28 },
                    { name: 'Armar dosificadores', startMin: 31, endMin: 40 },
                    { name: 'Secado de platillos', startMin: 66, endMin: 69 },
                    { name: 'Ajustar peso y velocidad', startMin: 72, endMin: 80 }
                ],
                'paletizador1': [
                    { name: 'Retirar tapas', startMin: 0, endMin: 4 },
                    { name: 'Retirar estrella tapadora', startMin: 4, endMin: 5 },
                    { name: 'Cerrar nitrógeno gas', startMin: 5, endMin: 8 },
                    { name: 'SALIR AFUERA: SODA+ÁCIDO', startMin: 8, endMin: 28 },
                    { name: 'Lavar tapadora', startMin: 33, endMin: 40 },
                    { name: 'Secar paredes y techo', startMin: 62, endMin: 72 },
                    { name: 'Apertura nitrógeno líquido', startMin: 75, endMin: 80 }
                ],
                'paletizador2': [
                    { name: 'Tiempo Libre / Espera', startMin: 0, endMin: 4 },
                    { name: 'Cambiar topes media luna', startMin: 4, endMin: 5 },
                    { name: 'SALIR AFUERA: SODA+ÁCIDO', startMin: 5, endMin: 28 },
                    { name: 'Secar pisos', startMin: 28, endMin: 33 },
                    { name: 'Lavar tapadora', startMin: 33, endMin: 40 },
                    { name: 'Secar paredes y techo', startMin: 59, endMin: 67 },
                    { name: 'Tiempo Libre / Final', startMin: 67, endMin: 80 }
                ]
            };

            const teamTasks = currentPhase === 1 ? phase1TeamTasks : phase2TeamTasks;

            // Actualizar cada lista de tareas
            for (const [member, tasks] of Object.entries(teamTasks)) {
                const tasksList = document.getElementById(`tasks-${member}`);
                if (!tasksList) continue;

                // Generar elementos HTML si el número de tareas cambió
                const currentItems = tasksList.querySelectorAll('.member-task-item');
                if (currentItems.length !== tasks.length) {
                    tasksList.innerHTML = tasks.map(task => `
                        <div class="member-task-item pending">
                            <span class="task-indicator pending"></span>
                            <span>${task.name}</span>
                        </div>
                    `).join('');
                }

                const taskItems = tasksList.querySelectorAll('.member-task-item');

                tasks.forEach((task, index) => {
                    if (taskItems[index]) {
                        const indicator = taskItems[index].querySelector('.task-indicator');
                        const textSpan = taskItems[index].querySelector('span:last-child');

                        // Actualizar texto de la tarea
                        if (textSpan) {
                            textSpan.textContent = task.name;
                        }

                        // Remover clases previas
                        taskItems[index].classList.remove('completed', 'active', 'pending');
                        indicator.classList.remove('completed', 'active', 'pending');

                        // Determinar estado
                        if (currentMinute >= task.endMin) {
                            // Tarea completada
                            taskItems[index].classList.add('completed');
                            indicator.classList.add('completed');
                        } else if (currentMinute >= task.startMin && currentMinute < task.endMin) {
                            // Tarea activa
                            taskItems[index].classList.add('active');
                            indicator.classList.add('active');
                        } else {
                            // Tarea pendiente
                            taskItems[index].classList.add('pending');
                            indicator.classList.add('pending');
                        }
                    }
                });
            }
        }

        // === SISTEMA DE MODAL ÉPICO CON COUNTDOWN ===
        let modalCountdownInterval = null;
        let modalCountdownValue = 10;

        function showCompletionModal() {
            pageAlert.classList.remove('warning', 'critical');

            // === EFECTO DE DESTRUCCIÓN ÉPICO ===
            const dashboard = document.querySelector('.dashboard-container');
            const bottomProgress = document.querySelector('.bottom-progress');

            // Crear overlay de destrucción
            const destructionOverlay = document.createElement('div');
            destructionOverlay.className = 'destruction-overlay';
            document.body.appendChild(destructionOverlay);

            // Crear flash de impacto
            const flash = document.createElement('div');
            flash.className = 'impact-flash';
            destructionOverlay.appendChild(flash);

            // Crear ondas de choque
            for (let i = 0; i < 3; i++) {
                const shockwave = document.createElement('div');
                shockwave.className = 'shockwave';
                destructionOverlay.appendChild(shockwave);
            }

            // Crear partículas de explosión
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'explosion-particles';
            destructionOverlay.appendChild(particlesContainer);

            const colors = ['#E30613', '#006B3F', '#FFFFFF', '#FFD700', '#FF6B6B', '#4ECDC4'];
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'explosion-particle';
                const angle = (Math.PI * 2 / 50) * i + Math.random() * 0.5;
                const distance = 300 + Math.random() * 400;
                particle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
                particle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.width = `${4 + Math.random() * 8}px`;
                particle.style.height = particle.style.width;
                particle.style.animationDelay = `${Math.random() * 0.3}s`;
                particlesContainer.appendChild(particle);
            }

            // Crear fragmentos hexagonales
            for (let i = 0; i < 20; i++) {
                const fragment = document.createElement('div');
                fragment.className = 'destruction-fragment';
                const size = 20 + Math.random() * 40;
                fragment.style.width = `${size}px`;
                fragment.style.height = `${size}px`;
                fragment.style.top = '50%';
                fragment.style.left = '50%';
                const angle = (Math.PI * 2 / 20) * i;
                const distance = 200 + Math.random() * 300;
                fragment.style.setProperty('--fx', `${Math.cos(angle) * distance}px`);
                fragment.style.setProperty('--fy', `${Math.sin(angle) * distance}px`);
                fragment.style.setProperty('--fr', `${Math.random() * 720 - 360}deg`);
                fragment.style.animationDelay = `${0.1 + Math.random() * 0.2}s`;
                destructionOverlay.appendChild(fragment);
            }

            // Crear chispas brillantes
            for (let i = 0; i < 30; i++) {
                const spark = document.createElement('div');
                spark.className = 'spark';
                spark.style.top = '50%';
                spark.style.left = '50%';
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 500;
                spark.style.setProperty('--sx', `${Math.cos(angle) * distance}px`);
                spark.style.setProperty('--sy', `${Math.sin(angle) * distance}px`);
                spark.style.animationDelay = `${Math.random() * 0.4}s`;
                destructionOverlay.appendChild(spark);
            }

            // Crear líneas de energía
            for (let i = 0; i < 12; i++) {
                const line = document.createElement('div');
                line.className = 'energy-line';
                line.style.transform = `rotate(${(360 / 12) * i}deg)`;
                line.style.animationDelay = `${i * 0.05}s`;
                destructionOverlay.appendChild(line);
            }

            // Crear efecto de pantalla rota
            const screenCrack = document.createElement('div');
            screenCrack.className = 'screen-crack';
            screenCrack.innerHTML = `
                <svg viewBox="0 0 100 100" preserveAspectRatio="none">
                    <path d="M50,50 L30,20 L35,15 L20,5" />
                    <path d="M50,50 L70,20 L75,25 L90,10" />
                    <path d="M50,50 L80,50 L85,45 L95,50" />
                    <path d="M50,50 L70,80 L75,85 L85,95" />
                    <path d="M50,50 L30,75 L25,80 L15,90" />
                    <path d="M50,50 L20,50 L15,55 L5,50" />
                    <path d="M50,50 L40,30 L35,25" />
                    <path d="M50,50 L60,70 L65,75" />
                </svg>
            `;
            document.body.appendChild(screenCrack);

            // Activar overlay
            destructionOverlay.classList.add('active');

            // Fase 1: Glitch intenso (0-300ms)
            dashboard.classList.add('glitching');

            // Fase 2: Agregar clase destroying para animar elementos (200ms)
            setTimeout(() => {
                dashboard.classList.remove('glitching');
                dashboard.classList.add('destroying');
                bottomProgress.classList.add('destroying');
                screenCrack.classList.add('active');
            }, 200);

            // Fase 3: Desintegración final (500ms)
            setTimeout(() => {
                dashboard.classList.add('disintegrating');
            }, 500);

            // Fase 4: Mostrar modal o celebración (1000ms)
            setTimeout(() => {
                if (currentPhase === 2) {
                    // Fase 2 completada - Mostrar celebración épica
                    showCelebration();
                } else {
                    // Fase 1 completada - Mostrar modal de transición
                    document.getElementById('completionModal').classList.add('active');
                    startModalCountdown();
                }
            }, 1000);

            // Limpiar elementos después de la animación
            setTimeout(() => {
                destructionOverlay.remove();
                screenCrack.remove();
            }, 2000);
        }

        function startModalCountdown() {
            modalCountdownValue = 10;
            updateModalCountdownDisplay();

            modalCountdownInterval = setInterval(() => {
                modalCountdownValue--;
                updateModalCountdownDisplay();

                if (modalCountdownValue <= 0) {
                    clearInterval(modalCountdownInterval);
                    continueToPhase2();
                }
            }, 1000);
        }

        function updateModalCountdownDisplay() {
            const countdownEl = document.getElementById('modalCountdown');
            const modalContent = document.getElementById('modalContent');

            countdownEl.textContent = modalCountdownValue;

            // Quitar clases anteriores
            countdownEl.classList.remove('warning', 'critical');
            modalContent.classList.remove('countdown-warning', 'countdown-critical');

            // Aplicar alertas según el tiempo restante
            if (modalCountdownValue <= 3) {
                countdownEl.classList.add('critical');
                modalContent.classList.add('countdown-critical');
            } else if (modalCountdownValue <= 5) {
                countdownEl.classList.add('warning');
                modalContent.classList.add('countdown-warning');
            }
        }

        function continueToPhase2() {
            if (modalCountdownInterval) {
                clearInterval(modalCountdownInterval);
                modalCountdownInterval = null;
            }

            // Cerrar modal
            document.getElementById('completionModal').classList.remove('active');

            const dashboard = document.querySelector('.dashboard-container');
            const bottomProgress = document.querySelector('.bottom-progress');

            // === CONFIGURAR FASE 2 ===
            // Reset state flags to prevent bugs
            isPhaseTransitioning = false;
            isOvertime = false;

            currentPhase = 2;
            maxSeconds = 80 * 60; // 80 minutos
            totalSeconds = 0;
            taskDefinitions = phase2Tasks;
            previousTasks = {};
            for (const id in taskDefinitions) {
                previousTasks[id] = taskDefinitions[id][0];
            }

            // Actualizar título
            document.querySelector('.project-title').textContent = 'SETUP TEST 1.0 - LAIVE';

            // Actualizar etiquetas de progreso
            const progressLabels = document.querySelector('.progress-labels');
            if (progressLabels) {
                progressLabels.innerHTML = '<span>00:00</span><span>40:00</span><span>68:00</span><span>80:00</span>';
            }

            // Actualizar tareas iniciales en las tarjetas
            for (let i = 1; i <= 4; i++) {
                const taskEl = document.getElementById('task' + i);
                if (taskEl) {
                    taskEl.textContent = taskDefinitions['task' + i][0];
                }
            }

            // === CREAR OVERLAY DE CONSTRUCCIÓN ===
            const constructionOverlay = document.createElement('div');
            constructionOverlay.className = 'construction-overlay';
            document.body.appendChild(constructionOverlay);

            // Crear partículas ascendentes
            const colors = ['#E30613', '#006B3F', '#FFFFFF', '#FFD700', '#4ECDC4'];
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'construction-particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.bottom = '0';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.setProperty('--target-y', `${-50 - Math.random() * 50}vh`);
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                constructionOverlay.appendChild(particle);
            }

            // Crear rayos de energía ascendentes
            for (let i = 0; i < 8; i++) {
                const beam = document.createElement('div');
                beam.className = 'construction-beam';
                beam.style.left = `${10 + i * 11}%`;
                beam.style.animationDelay = `${i * 0.1}s`;
                constructionOverlay.appendChild(beam);
            }

            // Crear anillos de energía ascendentes
            for (let i = 0; i < 3; i++) {
                const ring = document.createElement('div');
                ring.className = 'construction-ring';
                ring.style.animationDelay = `${i * 0.2}s`;
                constructionOverlay.appendChild(ring);
            }

            // Activar overlay
            constructionOverlay.classList.add('active');

            // === RESTAURAR Y ANIMAR DASHBOARD ===
            // Limpiar clases de destrucción
            dashboard.classList.remove('destroying', 'disintegrating', 'glitching');
            bottomProgress.classList.remove('destroying');

            // Resetear estilos inline
            dashboard.style.cssText = '';
            bottomProgress.style.cssText = '';

            // Resetear animaciones de elementos hijos
            const sidebar = dashboard.querySelector('.sidebar');
            const mainContent = dashboard.querySelector('.main-content');
            const timerSection = dashboard.querySelector('.timer-section');
            const taskCards = dashboard.querySelectorAll('.task-card');
            const logisticsBanner = dashboard.querySelector('.logistics-banner');
            const controlsSection = dashboard.querySelector('.controls-section');

            // Limpiar estilos inline de todos los elementos
            [sidebar, mainContent, timerSection, logisticsBanner, controlsSection].forEach(el => {
                if (el) el.style.cssText = '';
            });
            taskCards.forEach(card => {
                if (card) card.style.cssText = '';
            });

            // Forzar reflow
            void dashboard.offsetWidth;

            // Agregar clase de construcción
            dashboard.classList.add('constructing');
            bottomProgress.classList.add('constructing');

            // Actualizar botón de fase en barra flotante
            updatePhaseButton();

            // Actualizar display
            updateDisplay();

            // Limpiar después de animación
            setTimeout(() => {
                dashboard.classList.remove('constructing');
                bottomProgress.classList.remove('constructing');
                constructionOverlay.remove();

                // Asegurar visibilidad completa
                dashboard.style.opacity = '1';
                dashboard.style.transform = 'none';
                dashboard.style.filter = 'none';

                // Limpiar estilos de elementos hijos
                [sidebar, mainContent, timerSection, logisticsBanner, controlsSection].forEach(el => {
                    if (el) {
                        el.style.opacity = '1';
                        el.style.transform = 'none';
                    }
                });
                taskCards.forEach(card => {
                    if (card) {
                        card.style.opacity = '1';
                        card.style.transform = 'none';
                    }
                });

                bottomProgress.style.opacity = '1';
                bottomProgress.style.transform = 'translateY(0)';
            }, 1500);
        }

        function closeModal() {
            if (modalCountdownInterval) {
                clearInterval(modalCountdownInterval);
                modalCountdownInterval = null;
            }
            document.getElementById('completionModal').classList.remove('active');
        }

        for (const id in taskDefinitions) previousTasks[id] = taskDefinitions[id][0];
        updateHandlePosition();

        // Pantalla completa
        function toggleFullscreen() {
            const btn = document.getElementById('btnFullscreen');
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');

            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    icon.textContent = '⛶';
                    text.textContent = 'Salir';
                    btn.classList.add('is-fullscreen');
                }).catch(err => console.log(err));
            } else {
                document.exitFullscreen().then(() => {
                    icon.textContent = '⛶';
                    text.textContent = 'Pantalla Completa';
                    btn.classList.remove('is-fullscreen');
                }).catch(err => console.log(err));
            }
        }

        document.addEventListener('fullscreenchange', () => {
            const btn = document.getElementById('btnFullscreen');
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');
            if (!document.fullscreenElement) {
                icon.textContent = '⛶';
                text.textContent = 'Pantalla Completa';
                btn.classList.remove('is-fullscreen');
            }
        });

        // === SISTEMA DE CELEBRACIÓN ÉPICA ===
        let celebrationCountdownInterval = null;
        let celebrationCountdownValue = 15;
        let confettiInterval = null;
        let fireworkInterval = null;

        function showCelebration() {
            // Crear overlay de celebración
            const overlay = document.createElement('div');
            overlay.className = 'celebration-overlay';
            overlay.id = 'celebrationOverlay';

            // Luces de discoteca
            const discoLights = document.createElement('div');
            discoLights.className = 'disco-lights';
            for (let i = 0; i < 4; i++) {
                const light = document.createElement('div');
                light.className = 'disco-light';
                discoLights.appendChild(light);
            }
            overlay.appendChild(discoLights);

            // Rayos de luz giratorios
            const lightRays = document.createElement('div');
            lightRays.className = 'light-rays';
            for (let i = 0; i < 12; i++) {
                const ray = document.createElement('div');
                ray.className = 'light-ray';
                ray.style.setProperty('--start-angle', `${(360 / 12) * i}deg`);
                lightRays.appendChild(ray);
            }
            overlay.appendChild(lightRays);

            // Pulso de celebración
            const pulse = document.createElement('div');
            pulse.className = 'celebration-pulse';
            overlay.appendChild(pulse);

            // Contenido principal
            const content = document.createElement('div');
            content.className = 'celebration-content';
            content.innerHTML = `
                <div class="celebration-trophy">🏆</div>
                <h1 class="celebration-title">¡BIEN HECHO EQUIPO!</h1>
                <p class="celebration-subtitle">Setup completado exitosamente</p>
                <div class="celebration-stats">
                    <div class="stat-item">
                        <span class="stat-value">109</span>
                        <span class="stat-label">Minutos Totales</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">4</span>
                        <span class="stat-label">Miembros</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">2</span>
                        <span class="stat-label">Fases</span>
                    </div>
                </div>
                <p class="celebration-message">
                    ¡Excelente trabajo de equipo! Han completado todas las tareas del setup de producción. 
                    El equipo está listo para iniciar la producción.
                </p>
                <p class="celebration-countdown">
                    Reiniciando en <span id="celebrationCountdown">15</span> segundos
                </p>
                <button class="celebration-btn" onclick="resetToPhase1()">
                    ↺ Volver a Fase 1
                </button>
            `;
            overlay.appendChild(content);

            document.body.appendChild(overlay);

            // Activar overlay
            setTimeout(() => overlay.classList.add('active'), 50);

            // Crear estrellas brillantes
            for (let i = 0; i < 20; i++) {
                const star = document.createElement('div');
                star.className = 'sparkle-star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                star.style.transform = `scale(${0.5 + Math.random() * 1})`;
                overlay.appendChild(star);
            }

            // Iniciar confetti continuo
            startConfetti(overlay);

            // Iniciar fuegos artificiales
            startFireworks(overlay);

            // Iniciar countdown
            celebrationCountdownValue = 15;
            celebrationCountdownInterval = setInterval(() => {
                celebrationCountdownValue--;
                const countdownEl = document.getElementById('celebrationCountdown');
                if (countdownEl) {
                    countdownEl.textContent = celebrationCountdownValue;
                }

                if (celebrationCountdownValue <= 0) {
                    resetToPhase1();
                }
            }, 1000);
        }

        function startConfetti(overlay) {
            const colors = ['#E30613', '#006B3F', '#FFD700', '#FF6B6B', '#4ECDC4', '#FFFFFF', '#FFA500'];
            const shapes = ['square', 'circle', 'ribbon'];

            // Crear confetti inicial
            for (let i = 0; i < 100; i++) {
                createConfetti(overlay, colors, shapes, i * 30);
            }

            // Continuar creando confetti
            confettiInterval = setInterval(() => {
                for (let i = 0; i < 5; i++) {
                    createConfetti(overlay, colors, shapes, 0);
                }
            }, 200);
        }

        function createConfetti(overlay, colors, shapes, delay) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = `confetti ${shapes[Math.floor(Math.random() * shapes.length)]}`;
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.setProperty('--rotation', `${Math.random() * 720 - 360}deg`);
                confetti.style.animationDuration = `${2 + Math.random() * 3}s`;
                confetti.style.width = `${6 + Math.random() * 10}px`;
                confetti.style.height = `${6 + Math.random() * 10}px`;
                overlay.appendChild(confetti);

                // Remover después de la animación
                setTimeout(() => confetti.remove(), 5000);
            }, delay);
        }

        function startFireworks(overlay) {
            const colors = ['#E30613', '#006B3F', '#FFD700', '#FF6B6B', '#4ECDC4', '#FFFFFF'];

            fireworkInterval = setInterval(() => {
                createFirework(overlay, colors);
            }, 800);

            // Crear algunos fuegos artificiales iniciales
            setTimeout(() => createFirework(overlay, colors), 500);
            setTimeout(() => createFirework(overlay, colors), 1200);
        }

        function createFirework(overlay, colors) {
            const centerX = 20 + Math.random() * 60; // % de la pantalla
            const centerY = 20 + Math.random() * 40; // % de la pantalla
            const color = colors[Math.floor(Math.random() * colors.length)];

            // Crear partículas de explosión
            for (let i = 0; i < 20; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = `${centerX}%`;
                firework.style.top = `${centerY}%`;
                firework.style.background = color;

                const angle = (Math.PI * 2 / 20) * i;
                const distance = 50 + Math.random() * 100;
                firework.style.setProperty('--fx', `${Math.cos(angle) * distance}px`);
                firework.style.setProperty('--fy', `${Math.sin(angle) * distance}px`);
                firework.style.animationDelay = `${Math.random() * 0.2}s`;
                firework.style.boxShadow = `0 0 6px ${color}, 0 0 12px ${color}`;

                overlay.appendChild(firework);

                // Remover después de la animación
                setTimeout(() => firework.remove(), 1500);
            }
        }

        function resetToPhase1() {
            // Detener intervalos
            if (celebrationCountdownInterval) {
                clearInterval(celebrationCountdownInterval);
                celebrationCountdownInterval = null;
            }
            if (confettiInterval) {
                clearInterval(confettiInterval);
                confettiInterval = null;
            }
            if (fireworkInterval) {
                clearInterval(fireworkInterval);
                fireworkInterval = null;
            }

            // Remover overlay de celebración
            const overlay = document.getElementById('celebrationOverlay');
            if (overlay) {
                overlay.classList.remove('active');
                setTimeout(() => overlay.remove(), 500);
            }

            // Remover indicador de fase
            const phaseIndicator = document.querySelector('.phase-indicator');
            if (phaseIndicator) {
                phaseIndicator.remove();
            }

            // === RESETEAR A FASE 1 ===
            currentPhase = 1;
            maxSeconds = 29 * 60;
            totalSeconds = 0;
            taskDefinitions = phase1Tasks;
            previousTasks = {};
            for (const id in taskDefinitions) {
                previousTasks[id] = taskDefinitions[id][0];
            }

            // Restaurar título
            document.querySelector('.project-title').textContent = 'SETUP TEST 1.0 - LAIVE';

            // Restaurar etiquetas de progreso
            const progressLabels = document.querySelector('.progress-labels');
            if (progressLabels) {
                progressLabels.innerHTML = '<span>00:00</span><span>14:30</span><span>24:39</span><span>29:00</span>';
            }

            // Actualizar tareas en las tarjetas
            for (let i = 1; i <= 4; i++) {
                const taskEl = document.getElementById('task' + i);
                if (taskEl) {
                    taskEl.textContent = taskDefinitions['task' + i][0];
                }
            }

            // Obtener elementos del dashboard
            const dashboard = document.querySelector('.dashboard-container');
            const bottomProgress = document.querySelector('.bottom-progress');

            // Limpiar clases de destrucción
            dashboard.classList.remove('destroying', 'disintegrating', 'glitching');
            bottomProgress.classList.remove('destroying');

            // === CREAR ANIMACIÓN DE CONSTRUCCIÓN ===
            const constructionOverlay = document.createElement('div');
            constructionOverlay.className = 'construction-overlay';
            document.body.appendChild(constructionOverlay);

            // Crear partículas ascendentes
            const colors = ['#E30613', '#006B3F', '#FFFFFF', '#FFD700', '#4ECDC4'];
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'construction-particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.bottom = '0';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.setProperty('--target-y', `${-50 - Math.random() * 50}vh`);
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                constructionOverlay.appendChild(particle);
            }

            // Crear rayos de energía ascendentes
            for (let i = 0; i < 8; i++) {
                const beam = document.createElement('div');
                beam.className = 'construction-beam';
                beam.style.left = `${10 + i * 11}%`;
                beam.style.animationDelay = `${i * 0.1}s`;
                constructionOverlay.appendChild(beam);
            }

            // Crear anillos de energía
            for (let i = 0; i < 3; i++) {
                const ring = document.createElement('div');
                ring.className = 'construction-ring';
                ring.style.animationDelay = `${i * 0.2}s`;
                constructionOverlay.appendChild(ring);
            }

            constructionOverlay.classList.add('active');

            // Resetear estilos inline
            dashboard.style.cssText = '';
            bottomProgress.style.cssText = '';

            // Resetear elementos hijos
            const sidebar = dashboard.querySelector('.sidebar');
            const mainContent = dashboard.querySelector('.main-content');
            const timerSection = dashboard.querySelector('.timer-section');
            const taskCards = dashboard.querySelectorAll('.task-card');
            const logisticsBanner = dashboard.querySelector('.logistics-banner');
            const controlsSection = dashboard.querySelector('.controls-section');

            [sidebar, mainContent, timerSection, logisticsBanner, controlsSection].forEach(el => {
                if (el) el.style.cssText = '';
            });
            taskCards.forEach(card => {
                if (card) card.style.cssText = '';
            });

            // Forzar reflow
            void dashboard.offsetWidth;

            // Agregar clase de construcción
            dashboard.classList.add('constructing');
            bottomProgress.classList.add('constructing');

            // Actualizar display
            updateDisplay();

            // Limpiar después de animación
            setTimeout(() => {
                dashboard.classList.remove('constructing');
                bottomProgress.classList.remove('constructing');
                constructionOverlay.remove();

                // Asegurar visibilidad
                dashboard.style.opacity = '1';
                dashboard.style.transform = 'none';
                dashboard.style.filter = 'none';

                [sidebar, mainContent, timerSection, logisticsBanner, controlsSection].forEach(el => {
                    if (el) {
                        el.style.opacity = '1';
                        el.style.transform = 'none';
                    }
                });
                taskCards.forEach(card => {
                    if (card) {
                        card.style.opacity = '1';
                        card.style.transform = 'none';
                    }
                });

                bottomProgress.style.opacity = '1';
                bottomProgress.style.transform = 'translateY(0)';
            }, 1500);
        }

        // === SISTEMA DE OVERTIME (TIEMPO EXCEDIDO) ===

        function showOvertimeWarning() {
            // Create overtime warning overlay
            overtimeOverlay = document.createElement('div');
            overtimeOverlay.className = 'overtime-warning-overlay';
            overtimeOverlay.id = 'overtimeWarning';

            const overtimeMinutes = Math.floor((totalSeconds - maxSeconds) / 60);
            const overtimeSecs = (totalSeconds - maxSeconds) % 60;

            overtimeOverlay.innerHTML = `
                <div class="overtime-warning-icon">⚠️</div>
                <h1 class="overtime-title">TIEMPO EXCEDIDO</h1>
                <div class="overtime-timer" id="overtimeTimerDisplay">${formatTime(totalSeconds)}</div>
                <p class="overtime-subtitle">Se ha superado el tiempo establecido</p>
                <div class="overtime-extra-time" id="overtimeExtra">+${overtimeMinutes}:${String(overtimeSecs).padStart(2, '0')} EXTRA</div>
                <button class="overtime-pause-btn" onclick="pauseFromOvertime()">⏸ PAUSAR</button>
            `;

            document.body.appendChild(overtimeOverlay);

            // Activate with animation
            setTimeout(() => overtimeOverlay.classList.add('active'), 50);
        }

        function updateOvertimeDisplay() {
            const overtimeTimerEl = document.getElementById('overtimeTimerDisplay');
            const overtimeExtraEl = document.getElementById('overtimeExtra');

            if (overtimeTimerEl) {
                overtimeTimerEl.textContent = formatTime(totalSeconds);
            }

            if (overtimeExtraEl) {
                const extraSeconds = totalSeconds - maxSeconds;
                const extraMins = Math.floor(extraSeconds / 60);
                const extraSecs = extraSeconds % 60;
                overtimeExtraEl.textContent = `+${extraMins}:${String(extraSecs).padStart(2, '0')} EXTRA`;
            }
        }

        function hideOvertimeWarning() {
            const overlay = document.getElementById('overtimeWarning');
            if (overlay) {
                overlay.classList.remove('active');
                setTimeout(() => overlay.remove(), 500);
            }
            overtimeOverlay = null;
        }

        function showOvertimeCompletion() {
            const extraSeconds = totalSeconds - maxSeconds;
            const extraMins = Math.floor(extraSeconds / 60);
            const extraSecs = extraSeconds % 60;
            const totalMins = Math.floor(totalSeconds / 60);

            const overlay = document.createElement('div');
            overlay.className = 'overtime-completion-overlay';
            overlay.id = 'overtimeCompletion';

            overlay.innerHTML = `
                <div class="overtime-completion-icon">🍀</div>
                <h1 class="overtime-completion-title">¡SUERTE PARA<br>LA PRÓXIMA!</h1>
                <div class="overtime-completion-stats">
                    <div class="overtime-stat">
                        <span class="overtime-stat-value">${totalMins}</span>
                        <span class="overtime-stat-label">Minutos Totales</span>
                    </div>
                    <div class="overtime-stat">
                        <span class="overtime-stat-value">+${extraMins}:${String(extraSecs).padStart(2, '0')}</span>
                        <span class="overtime-stat-label">Tiempo Extra</span>
                    </div>
                </div>
                <p class="overtime-completion-message">
                    Se excedieron los 80 minutos establecidos. ¡El próximo setup será mejor!
                    Analicen los tiempos y optimicen los procesos. ¡Ustedes pueden! 💪
                </p>
                <button class="overtime-completion-btn" onclick="resetFromOvertime()">
                    ↺ Reiniciar Dashboard
                </button>
            `;

            document.body.appendChild(overlay);
            setTimeout(() => overlay.classList.add('active'), 50);
        }

        function hideOvertimeCompletion() {
            const overlay = document.getElementById('overtimeCompletion');
            if (overlay) {
                overlay.classList.remove('active');
                setTimeout(() => overlay.remove(), 500);
            }
        }

        function resetFromOvertime() {
            hideOvertimeCompletion();

            // Reset all state
            isOvertime = false;
            isPhaseTransitioning = false;

            // Reset to phase 1
            currentPhase = 1;
            maxSeconds = 29 * 60;
            totalSeconds = 0;
            taskDefinitions = phase1Tasks;
            previousTasks = {};
            for (const id in taskDefinitions) {
                previousTasks[id] = taskDefinitions[id][0];
            }

            // Remove phase indicator if exists
            const phaseIndicator = document.querySelector('.phase-indicator');
            if (phaseIndicator) phaseIndicator.remove();

            // Restore progress labels
            const progressLabels = document.querySelector('.progress-labels');
            if (progressLabels) {
                progressLabels.innerHTML = '<span>00:00</span><span>14:30</span><span>24:39</span><span>29:00</span>';
            }

            // Update tasks in cards
            for (let i = 1; i <= 4; i++) {
                const taskEl = document.getElementById('task' + i);
                if (taskEl) {
                    taskEl.textContent = taskDefinitions['task' + i][0];
                }
            }

            // Clean dashboard state
            const dashboard = document.querySelector('.dashboard-container');
            const bottomProgress = document.querySelector('.bottom-progress');

            dashboard.classList.remove('destroying', 'disintegrating', 'glitching');
            bottomProgress.classList.remove('destroying');

            dashboard.style.opacity = '1';
            dashboard.style.transform = 'none';
            dashboard.style.filter = 'none';

            bottomProgress.style.opacity = '1';
            bottomProgress.style.transform = 'translateY(0)';

            isPaused = false;
            updateDisplay();
            updatePauseButton();
            updatePhaseButton();
        }

        // === FUNCIONES ADICIONALES ===

        // Pausar desde el overlay de overtime
        function pauseFromOvertime() {
            stopTimer();
            isPaused = true;
            hideOvertimeWarning();
            showOvertimeCompletion();
            updatePauseButton();
        }

        // Trigger de completar fase manualmente
        function triggerPhaseComplete() {
            if (currentPhase === 1) {
                // Completar Fase 1 manualmente
                stopTimer();
                isPhaseTransitioning = true;
                showCompletionModal();
            } else if (currentPhase === 2) {
                // Completar Fase 2 manualmente - mostrar celebración
                if (isOvertime) {
                    hideOvertimeWarning();
                    showOvertimeCompletion();
                } else {
                    stopTimer();
                    showCelebration();
                }
            }
        }

        // Actualizar texto del botón de fase
        function updatePhaseButton() {
            const phaseText = document.getElementById('phaseCompleteText');
            if (phaseText) {
                phaseText.textContent = currentPhase === 1 ? '✓ FASE 1' : '✓ FASE 2';
            }
        }

        // Actualizar botón de pausa flotante
        function updateFloatingPauseButton() {
            const floatingPause = document.getElementById('floatingPause');
            if (floatingPause) {
                if (isPaused || (!timerInterval && totalSeconds > 0)) {
                    floatingPause.textContent = '▶';
                    floatingPause.classList.add('is-paused');
                } else {
                    floatingPause.textContent = '⏸';
                    floatingPause.classList.remove('is-paused');
                }
            }
        }

        // Override updatePauseButton to also update floating
        const originalUpdatePauseButton = updatePauseButton;
        updatePauseButton = function () {
            // Original button
            if (isPaused || (!timerInterval && totalSeconds > 0)) {
                pauseIcon.textContent = '▶';
                pauseText.textContent = 'Reanudar';
                btnPause.classList.add('is-paused');
            } else {
                pauseIcon.textContent = '⏸';
                pauseText.textContent = 'Pausar';
                btnPause.classList.remove('is-paused');
            }
            // Floating button
            updateFloatingPauseButton();
        };

        // Initialize phase button text
        updatePhaseButton();
    </script>

    <!-- Protección contra inspección -->
    <script>
        // Bloquear clic derecho
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });

        // Bloquear teclas de inspección
        document.addEventListener('keydown', function (e) {
            // F12
            if (e.key === 'F12' || e.keyCode === 123) {
                e.preventDefault();
                return false;
            }
            // Ctrl+Shift+I
            if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i')) {
                e.preventDefault();
                return false;
            }
            // Ctrl+Shift+J
            if (e.ctrlKey && e.shiftKey && (e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
                return false;
            }
            // Ctrl+Shift+C
            if (e.ctrlKey && e.shiftKey && (e.key === 'C' || e.key === 'c')) {
                e.preventDefault();
                return false;
            }
            // Ctrl+U (ver código fuente)
            if (e.ctrlKey && (e.key === 'U' || e.key === 'u')) {
                e.preventDefault();
                return false;
            }
            // Ctrl+S (guardar)
            if (e.ctrlKey && (e.key === 'S' || e.key === 's')) {
                e.preventDefault();
                return false;
            }
        });

        // Deshabilitar arrastrar elementos
        document.addEventListener('dragstart', function (e) {
            e.preventDefault();
            return false;
        });

        // Deshabilitar selección de texto
        document.addEventListener('selectstart', function (e) {
            if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                return false;
            }
        });

        // Elmerciot: Inicializar tareas al cargar la página
        document.addEventListener('DOMContentLoaded', function () {
            for (const id in taskDefinitions) {
                const task = taskDefinitions[id][0];
                const el = document.getElementById(id);
                if (el) {
                    el.textContent = task;
                }
            }
        });

        /* ========================================================================
           FIN DEL CÓDIGO - Elmerciot
           
           Dashboard de Producción LAIVE - Setup Test 1.0
           Desarrollado por: Elmerciot
           Diciembre 2025
           
           © 2025 Elmerciot - Todos los derechos reservados
           Cualquier copia o modificación no autorizada está prohibida.
        ======================================================================== */
    </script>
</body>

<!-- 
    ================================================================================
    DASHBOARD DE PRODUCCIÓN - SETUP TEST 1.0 LAIVE
    Desarrollado por Elmerciot - © 2025 Todos los derechos reservados
    NO COPIAR - NO MODIFICAR - NO DISTRIBUIR SIN AUTORIZACIÓN
    ================================================================================
-->

</html>
