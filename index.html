<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SETUP TEST 1.0 - LAIVE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #fafbff;
            --bg-card: #ffffff;
            --glass-border: rgba(99, 102, 241, 0.12);
            --theme-primary: #6366f1;
            --theme-secondary: #8b5cf6;
            --theme-accent: #0ea5e9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --green: #10b981;
            --yellow: #f59e0b;
            --red: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #6B8DD6 50%, #8E37D7 75%, #667eea 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        @keyframes gradientShift {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        /* Part铆culas flotantes - OPTIMIZADAS para mejor rendimiento */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 50%;
            animation: particleFloat 25s infinite linear;
        }

        .particle:nth-child(1) {
            width: 90px;
            height: 90px;
            left: 15%;
            animation-delay: 0s;
            animation-duration: 28s;
        }

        .particle:nth-child(2) {
            width: 70px;
            height: 70px;
            left: 55%;
            animation-delay: -8s;
            animation-duration: 24s;
        }

        .particle:nth-child(3) {
            width: 110px;
            height: 110px;
            left: 85%;
            animation-delay: -14s;
            animation-duration: 32s;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.4;
            }

            90% {
                opacity: 0.4;
            }

            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Alerta de p谩gina */
        .page-alert {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 998;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .page-alert.warning {
            animation: warningPulse 1s infinite;
            opacity: 1;
        }

        .page-alert.critical {
            animation: criticalPulse 0.4s infinite;
            opacity: 1;
        }

        @keyframes warningPulse {

            0%,
            100% {
                box-shadow: inset 0 0 100px rgba(245, 158, 11, 0);
            }

            50% {
                box-shadow: inset 0 0 150px rgba(245, 158, 11, 0.3);
            }
        }

        @keyframes criticalPulse {

            0%,
            100% {
                box-shadow: inset 0 0 100px rgba(239, 68, 68, 0);
            }

            50% {
                box-shadow: inset 0 0 200px rgba(239, 68, 68, 0.4);
            }
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* SIDEBAR */
        .sidebar {
            width: 25%;
            min-width: 320px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.3);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            box-shadow: 5px 0 40px rgba(0, 0, 0, 0.1);
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899, #f43f5e);
            background-size: 300% 100%;
            animation: borderGlow 3s linear infinite;
        }

        @keyframes borderGlow {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .logo-container {
            width: 90px;
            height: 90px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
            background-size: 200% 200%;
            animation: logoGradient 4s ease infinite, logoFloat 3s ease-in-out infinite;
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 15px 50px rgba(99, 102, 241, 0.4);
            position: relative;
        }

        .logo-container::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 27px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899, #6366f1);
            background-size: 400% 400%;
            animation: borderRotate 3s linear infinite;
            z-index: -1;
            filter: blur(8px);
            opacity: 0.7;
        }

        @keyframes logoGradient {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-8px) scale(1.02);
            }
        }

        @keyframes borderRotate {
            0% {
                background-position: 0% 50%;
            }

            100% {
                background-position: 400% 50%;
            }
        }

        .logo-container svg {
            width: 50px;
            height: 50px;
            fill: white;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .project-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.5rem;
            background: linear-gradient(135deg, #eef2ff, #fdf4ff);
            border: 1px solid #c7d2fe;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            color: #6366f1;
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.3);
            }

            50% {
                box-shadow: 0 0 20px 5px rgba(99, 102, 241, 0.2);
            }
        }

        .project-title {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
            background-size: 200% 200%;
            animation: textGradient 4s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(99, 102, 241, 0.3);
        }

        @keyframes textGradient {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .project-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .project-subtitle span {
            color: #8b5cf6;
            font-weight: 700;
        }

        /* Animaci贸n de escritura para el creador - MEJORADA */
        .creator-credit {
            font-size: 1.3rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            margin-top: 0.5rem;
        }

        .typewriter {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            border-right: 4px solid #ec4899;
            padding-right: 5px;
            animation: typing 3s steps(9) infinite, blink 0.6s step-end infinite, glow 2s ease-in-out infinite;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
            font-size: 1.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            filter: drop-shadow(0 2px 8px rgba(139, 92, 246, 0.5));
        }

        @keyframes typing {

            0%,
            5% {
                width: 0;
            }

            25%,
            75% {
                width: 100%;
            }

            95%,
            100% {
                width: 0;
            }
        }

        @keyframes blink {
            50% {
                border-color: transparent;
            }
        }

        @keyframes glow {

            0%,
            100% {
                filter: drop-shadow(0 2px 8px rgba(139, 92, 246, 0.5));
            }

            50% {
                filter: drop-shadow(0 4px 20px rgba(236, 72, 153, 0.8));
            }
        }

        .team-section {
            flex: 1;
        }

        .team-section-title {
            font-size: 1rem;
            font-weight: 800;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.2rem 1.8rem;
            border-radius: 18px;
            border: 2px solid rgba(99, 102, 241, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-primary);
            animation: teamHeaderGlow 3s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
        }

        .team-section-title::before {
            content: '';
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        @keyframes teamHeaderGlow {

            0%,
            100% {
                box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
                border-color: rgba(99, 102, 241, 0.25);
            }

            50% {
                box-shadow: 0 6px 25px rgba(139, 92, 246, 0.25);
                border-color: rgba(139, 92, 246, 0.4);
            }
        }

        .team-group {
            background: linear-gradient(135deg, #fafbff, #f5f3ff);
            border: 1px solid rgba(139, 92, 246, 0.15);
            border-radius: 20px;
            padding: 1.25rem;
            margin-bottom: 1.25rem;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.08);
            position: relative;
            overflow: hidden;
            animation: teamGroupFloat 8s ease-in-out infinite;
        }

        .team-group:nth-child(1) {
            animation-delay: 0s;
        }

        .team-group:nth-child(2) {
            animation-delay: 4s;
        }

        .team-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.15), transparent);
            animation: teamShimmer 6s ease-in-out infinite;
        }

        @keyframes teamGroupFloat {

            0%,
            100% {
                transform: translateX(0) scale(1);
                box-shadow: 0 4px 20px rgba(99, 102, 241, 0.08);
                border-color: rgba(139, 92, 246, 0.15);
            }

            50% {
                transform: translateX(6px) scale(1.015);
                box-shadow: 0 10px 35px rgba(139, 92, 246, 0.22);
                border-color: rgba(139, 92, 246, 0.35);
            }
        }

        @keyframes teamShimmer {

            0%,
            100% {
                left: -100%;
            }

            50% {
                left: 100%;
            }
        }

        .team-group-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
        }

        .team-group-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 30px rgba(99, 102, 241, 0.5);
            }
        }

        .team-group-icon svg {
            width: 26px;
            height: 26px;
            fill: white;
        }

        .team-group-name {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .team-members {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.85rem 1.1rem;
            background: white;
            border-radius: 12px;
            border: 1px solid transparent;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            animation: memberShimmer 10s ease-in-out infinite;
        }

        .team-member:nth-child(1) {
            animation-delay: 0s;
        }

        .team-member:nth-child(2) {
            animation-delay: 1.5s;
        }

        @keyframes memberShimmer {

            0%,
            100% {
                background: white;
                transform: translateX(0);
                border-color: transparent;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            }

            50% {
                background: linear-gradient(135deg, #faf5ff, #f5f3ff);
                transform: translateX(4px);
                border-color: rgba(139, 92, 246, 0.2);
                box-shadow: 0 4px 15px rgba(139, 92, 246, 0.12);
            }
        }

        .member-indicator {
            width: 14px;
            height: 14px;
            background: linear-gradient(135deg, #10b981, #34d399);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
            animation: indicatorPulse 1.5s ease-in-out infinite;
        }

        @keyframes indicatorPulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
            }

            50% {
                transform: scale(1.25);
                box-shadow: 0 0 25px rgba(16, 185, 129, 0.9);
            }
        }

        .member-name {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Lista de tareas por miembro */
        .member-tasks-list {
            margin-top: 0.5rem;
            padding-left: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .member-task-item {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            padding: 0.3rem 0.5rem;
            border-radius: 8px;
        }

        .member-task-item.completed {
            text-decoration: line-through;
            opacity: 0.5;
            color: var(--text-muted);
        }

        .member-task-item.active {
            font-weight: 700;
            color: #059669;
            background: rgba(16, 185, 129, 0.08);
        }

        .member-task-item.pending {
            opacity: 0.7;
        }

        .task-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .task-indicator.completed {
            background: #cbd5e1;
        }

        .task-indicator.active {
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.6);
            animation: indicatorPulseFast 1s ease-in-out infinite;
        }

        .task-indicator.pending {
            background: #e2e8f0;
            border: 1.5px solid #cbd5e1;
        }

        @keyframes indicatorPulseFast {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 10px rgba(16, 185, 129, 0.6);
            }

            50% {
                transform: scale(1.3);
                box-shadow: 0 0 16px rgba(16, 185, 129, 0.9);
            }
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* BANNER LOGSTICA */
        .logistics-banner {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            padding: 1.5rem 2rem;
            position: relative;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .logistics-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f59e0b, #fbbf24, #f97316, #f59e0b);
            background-size: 300% 100%;
            animation: borderGlow 3s linear infinite;
        }

        .logistics-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .logistics-icon-wrapper {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #fbbf24;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 25px rgba(251, 191, 36, 0.4);
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        .logistics-icon-wrapper svg {
            width: 30px;
            height: 30px;
            fill: #b45309;
        }

        .logistics-title-group {
            display: flex;
            flex-direction: column;
        }

        .logistics-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 0.25rem;
        }

        .logistics-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #b45309;
        }

        .logistics-content {
            position: relative;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logistics-text {
            position: absolute;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(20px) scale(0.95);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logistics-text.active {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* CRONMETRO */
        .timer-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 28px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .timer-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899);
            background-size: 200% 100%;
            animation: borderGlow 3s linear infinite;
        }

        .timer-section.warning {
            border-color: #f59e0b;
            box-shadow: 0 0 60px rgba(245, 158, 11, 0.3);
        }

        .timer-section.critical {
            border-color: #ef4444;
            box-shadow: 0 0 80px rgba(239, 68, 68, 0.4);
            animation: timerShake 0.3s infinite;
        }

        @keyframes timerShake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-4px);
            }

            75% {
                transform: translateX(4px);
            }
        }

        .timer-display {
            font-size: 7rem;
            font-weight: 900;
            letter-spacing: 8px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
            background-size: 200% 200%;
            animation: textGradient 4s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            font-variant-numeric: tabular-nums;
            filter: drop-shadow(0 4px 30px rgba(99, 102, 241, 0.4));
        }

        .timer-display.warning {
            background: linear-gradient(135deg, #d97706, #f59e0b, #fbbf24);
            -webkit-background-clip: text;
            background-clip: text;
            animation: none;
        }

        .timer-display.critical {
            background: linear-gradient(135deg, #dc2626, #ef4444, #f87171);
            -webkit-background-clip: text;
            background-clip: text;
            animation: timerBlink 0.3s infinite;
        }

        @keyframes timerBlink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .progress-container {
            background: linear-gradient(135deg, #e2e8f0, #f1f5f9);
            border-radius: 16px;
            height: 32px;
            position: relative;
            border: 2px solid #cbd5e1;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .progress-container:active {
            border-color: #8b5cf6;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        .progress-bar {
            height: 100%;
            border-radius: 14px;
            transition: width 0.1s linear, background 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 44px;
            background: white;
            border: 3px solid #8b5cf6;
            border-radius: 12px;
            cursor: grab;
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .progress-handle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 18px;
            background: linear-gradient(180deg, #6366f1, #8b5cf6);
            border-radius: 3px;
        }

        .progress-green {
            background: linear-gradient(90deg, #059669, #10b981, #34d399);
        }

        .progress-yellow {
            background: linear-gradient(90deg, #d97706, #f59e0b, #fbbf24);
        }

        .progress-red {
            background: linear-gradient(90deg, #dc2626, #ef4444, #f87171);
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* GRID DE TAREAS */
        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            flex: 1;
        }

        .task-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            padding: 1.75rem;
            display: flex;
            flex-direction: column;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        /* Barra de progreso que cubre la tarjeta - MS VISIBLE */
        .task-card-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 100%;
            border-radius: 22px;
            transition: width 0.5s linear, background 0.5s ease;
            z-index: 1;
            opacity: 0.5;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Colores de progreso para las tarjetas - MS INTENSOS Y VISIBLES */
        .task-card-progress.card-progress-green {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.4), rgba(52, 211, 153, 0.55));
            box-shadow: inset 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .task-card-progress.card-progress-yellow {
            background: linear-gradient(90deg, rgba(245, 158, 11, 0.4), rgba(251, 191, 36, 0.55));
            box-shadow: inset 0 0 20px rgba(245, 158, 11, 0.3);
        }

        .task-card-progress.card-progress-red {
            background: linear-gradient(90deg, rgba(239, 68, 68, 0.45), rgba(248, 113, 113, 0.6));
            box-shadow: inset 0 0 20px rgba(239, 68, 68, 0.3);
        }

        /* Animaci贸n de temblor para estado cr铆tico (rojo) - PRIORIDAD ALTA */
        .task-card.card-shake {
            animation: cardShake 0.4s infinite !important;
        }

        @keyframes cardShake {

            0%,
            100% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-5px) rotate(-0.5deg);
            }

            40% {
                transform: translateX(5px) rotate(0.5deg);
            }

            60% {
                transform: translateX(-4px) rotate(-0.3deg);
            }

            80% {
                transform: translateX(4px) rotate(0.3deg);
            }
        }

        /* Wrapper para contenido sobre la barra */
        .task-card-content-wrapper {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .task-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            border-radius: 6px 0 0 6px;
            z-index: 3;
        }

        .task-card.card-blue::before {
            background: linear-gradient(180deg, #3b82f6, #60a5fa);
        }

        .task-card.card-purple::before {
            background: linear-gradient(180deg, #8b5cf6, #a78bfa);
        }

        .task-card.card-cyan::before {
            background: linear-gradient(180deg, #06b6d4, #22d3ee);
        }

        .task-card.card-green::before {
            background: linear-gradient(180deg, #10b981, #34d399);
        }

        .task-card.idle {
            background: rgba(241, 245, 249, 0.95);
            border-color: #cbd5e1;
        }

        .task-card.idle::before {
            background: linear-gradient(180deg, #94a3b8, #cbd5e1) !important;
        }

        /* Ocultar barra de progreso en tarjetas idle */
        .task-card.idle .task-card-progress {
            opacity: 0 !important;
            width: 0% !important;
        }

        .task-card.idle .task-status-badge {
            background: #e2e8f0;
            border-color: #94a3b8;
            color: #64748b;
        }

        .task-card.active-task {
            animation: cardGlow 2.5s ease-in-out infinite;
        }

        @keyframes cardGlow {

            0%,
            100% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
                transform: scale(1);
            }

            50% {
                box-shadow: 0 15px 60px rgba(99, 102, 241, 0.25);
                transform: scale(1.01);
            }
        }

        .task-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        }

        .task-role {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .task-status-badge {
            padding: 0.5rem 1.2rem;
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border: 1px solid #6ee7b7;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            color: #059669;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: badgeGlow 2s ease-in-out infinite;
        }

        @keyframes badgeGlow {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.3);
            }

            50% {
                box-shadow: 0 0 15px 3px rgba(16, 185, 129, 0.25);
            }
        }

        .task-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem 0;
            min-height: 100px;
        }

        .task-text {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.5;
            transition: all 0.5s ease;
            text-shadow:
                0 2px 4px rgba(255, 255, 255, 0.9),
                0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .task-text.fade-out {
            opacity: 0;
            transform: translateY(-15px) scale(0.95);
        }

        /* BOTONES DE CONTROL */
        .controls-section {
            display: flex;
            justify-content: center;
            gap: 1.25rem;
            margin-top: auto;
            padding-top: 1rem;
        }

        .control-btn {
            padding: 1.1rem 2.75rem;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .control-btn:hover::before {
            left: 100%;
        }

        .btn-start {
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);
        }

        .btn-start:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(16, 185, 129, 0.5);
        }

        .btn-pause {
            background: linear-gradient(135deg, #d97706, #f59e0b);
            color: white;
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4);
        }

        .btn-pause:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(245, 158, 11, 0.5);
        }

        .btn-pause.is-paused {
            background: linear-gradient(135deg, #059669, #10b981);
        }

        .btn-reset {
            background: linear-gradient(135deg, #64748b, #94a3b8);
            color: white;
            box-shadow: 0 8px 30px rgba(100, 116, 139, 0.4);
        }

        .btn-reset:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(100, 116, 139, 0.5);
        }

        .btn-fullscreen {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.4);
        }

        .btn-fullscreen:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(99, 102, 241, 0.5);
        }

        .btn-fullscreen.is-fullscreen {
            background: linear-gradient(135deg, #ec4899, #f43f5e);
        }

        /* BARRA DE PROGRESO INFERIOR FIJA */
        .bottom-progress {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem;
            z-index: 999;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.1);
            border-top: 1px solid rgba(99, 102, 241, 0.1);
        }

        .bottom-progress-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .bottom-progress-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            min-width: 200px;
        }

        .bottom-progress-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .bottom-progress-value {
            font-size: 2.5rem;
            font-weight: 900;
            transition: color 0.3s;
        }

        .bottom-progress-value.green {
            color: #10b981;
        }

        .bottom-progress-value.yellow {
            color: #f59e0b;
        }

        .bottom-progress-value.red {
            color: #ef4444;
        }

        .bottom-progress-bar-wrapper {
            flex: 1;
        }

        .bottom-progress-bar-container {
            background: linear-gradient(135deg, #e2e8f0, #f1f5f9);
            border-radius: 12px;
            height: 24px;
            overflow: hidden;
            border: 2px solid #cbd5e1;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.06);
        }

        .bottom-progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.2s linear, background 0.5s ease;
            position: relative;
        }

        .bottom-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        .bottom-time-display {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            min-width: 100px;
            text-align: right;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 32px;
            padding: 3.5rem;
            text-align: center;
            max-width: 550px;
            transform: scale(0.8) translateY(50px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 30px 100px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #10b981, #34d399, #6ee7b7);
            border-radius: 32px 32px 0 0;
        }

        .modal-icon {
            width: 130px;
            height: 130px;
            background: linear-gradient(135deg, #059669, #10b981);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.45);
            animation: successBounce 0.8s ease;
        }

        @keyframes successBounce {
            0% {
                transform: scale(0) rotate(-180deg);
            }

            60% {
                transform: scale(1.2) rotate(10deg);
            }

            100% {
                transform: scale(1) rotate(0deg);
            }
        }

        .modal-icon svg {
            width: 70px;
            height: 70px;
            fill: white;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #059669, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .modal-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
        }

        .modal-subtitle span {
            color: #8b5cf6;
            font-weight: 700;
        }

        .modal-btn {
            padding: 1.25rem 3.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 0 15px 50px rgba(99, 102, 241, 0.45);
        }

        @media (max-width: 1200px) {
            .sidebar {
                width: 300px;
                min-width: 300px;
            }

            .timer-display {
                font-size: 4.5rem;
            }
        }

        @media (max-width: 900px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                min-width: 100%;
            }

            .tasks-grid {
                grid-template-columns: 1fr;
            }

            .timer-display {
                font-size: 3.5rem;
            }

            .bottom-progress-content {
                flex-wrap: wrap;
            }
        }
    </style>
</head>

<body>
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <div class="page-alert" id="pageAlert"></div>

    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <div class="logo-container">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M21 16.5C21 16.88 20.79 17.21 20.47 17.38L12.57 21.82C12.41 21.94 12.21 22 12 22C11.79 22 11.59 21.94 11.43 21.82L3.53 17.38C3.21 17.21 3 16.88 3 16.5V7.5C3 7.12 3.21 6.79 3.53 6.62L11.43 2.18C11.59 2.06 11.79 2 12 2C12.21 2 12.41 2.06 12.57 2.18L20.47 6.62C20.79 6.79 21 7.12 21 7.5V16.5ZM12 4.15L5 8.09V15.91L12 19.85L19 15.91V8.09L12 4.15Z" />
                            <path d="M12 6L16 8.5V13.5L12 16L8 13.5V8.5L12 6Z" opacity="0.6" />
                        </svg>
                    </div>
                    <div class="project-badge"> Centro de Control</div>
                    <h1 class="project-title">SETUP TEST 1.0 - LAIVE</h1>
                    <div class="creator-credit">By <span class="typewriter">Elmerciot</span></div>
                </div>
                <div class="team-section">
                    <h3 class="team-section-title">El Equipo</h3>
                    <div class="team-group">
                        <div class="team-group-header">
                            <div class="team-group-icon"><svg viewBox="0 0 24 24">
                                    <path
                                        d="M21 16.5C21 16.88 20.79 17.21 20.47 17.38L12.57 21.82C12.41 21.94 12.21 22 12 22C11.79 22 11.59 21.94 11.43 21.82L3.53 17.38C3.21 17.21 3 16.88 3 16.5V7.5C3 7.12 3.21 6.79 3.53 6.62L11.43 2.18C11.59 2.06 11.79 2 12 2C12.21 2 12.41 2.06 12.57 2.18L20.47 6.62C20.79 6.79 21 7.12 21 7.5V16.5M12 4.15L6.04 7.5L12 10.85L17.96 7.5L12 4.15M5 15.91L11 19.29V12.58L5 9.21V15.91M19 15.91V9.21L13 12.58V19.29L19 15.91Z" />
                                </svg></div>
                            <span class="team-group-name">Grupo Envasadora</span>
                        </div>
                        <div class="team-members">
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Maquinista Envasado</span>
                                    <div class="member-tasks-list" id="tasks-maquinista">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocaci贸n de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Ayudante Envasado</span>
                                    <div class="member-tasks-list" id="tasks-ayudante">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocaci贸n de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Purgar l铆nea nitr贸geno (3 min)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="team-group">
                        <div class="team-group-header">
                            <div class="team-group-icon"><svg viewBox="0 0 24 24">
                                    <path
                                        d="M22.7 19L13.6 9.9C14.5 7.6 14 4.9 12.1 3C10.1 1 7.1 .6 4.7 1.7L9 6L6 9L1.6 4.7C.4 7.1 .9 10.1 2.9 12.1C4.8 14 7.5 14.5 9.8 13.6L18.9 22.7C19.3 23.1 19.9 23.1 20.3 22.7L22.6 20.4C23.1 20 23.1 19.3 22.7 19Z" />
                                </svg></div>
                            <span class="team-group-name">Grupo Tapadora</span>
                        </div>
                        <div class="team-members">
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Paletizador 1</span>
                                    <div class="member-tasks-list" id="tasks-paletizador1">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocaci贸n de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="team-member">
                                <span class="member-indicator"></span>
                                <div style="flex: 1;">
                                    <span class="member-name">Paletizador 2</span>
                                    <div class="member-tasks-list" id="tasks-paletizador2">
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Colocaci贸n de EPPs</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Lavado de dosificadores griego</span>
                                        </div>
                                        <div class="member-task-item pending">
                                            <span class="task-indicator pending"></span>
                                            <span>Tiempo Libre / Espera</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <section class="logistics-banner">
                <div class="logistics-header">
                    <div class="logistics-icon-wrapper">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M18 18.5C18.83 18.5 19.5 17.83 19.5 17C19.5 16.17 18.83 15.5 18 15.5C17.17 15.5 16.5 16.17 16.5 17C16.5 17.83 17.17 18.5 18 18.5M19.5 9.5L21.46 12H17V9.5H19.5M6 18.5C6.83 18.5 7.5 17.83 7.5 17C7.5 16.17 6.83 15.5 6 15.5C5.17 15.5 4.5 16.17 4.5 17C4.5 17.83 5.17 18.5 6 18.5M20 8H17V4H3C1.89 4 1 4.89 1 6V17H3C3 18.66 4.34 20 6 20S9 18.66 9 17H15C15 18.66 16.34 20 18 20S21 18.66 21 17H23V12L20 8Z" />
                        </svg>
                    </div>
                    <div class="logistics-title-group">
                        <span class="logistics-label">Operaciones</span>
                        <span class="logistics-title">Log铆stica General (Todos)</span>
                    </div>
                </div>
                <div class="logistics-content">
                    <p class="logistics-text active"> Traer detergente, esponjas verdes y pa帽os (7')</p>
                    <p class="logistics-text"> Repartir materiales a los equipos</p>
                    <p class="logistics-text"> Colocar en punto de uso: utensilios, baldes, coches</p>
                </div>
            </section>

            <section class="timer-section" id="timerSection">
                <div class="timer-display" id="timerDisplay">00:00</div>
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar progress-green" id="progressBar" style="width: 0%;"></div>
                    <div class="progress-handle" id="progressHandle" style="left: 0;"></div>
                </div>
                <div class="progress-labels"><span>00:00</span><span>14:30</span><span>24:39</span><span>29:00</span>
                </div>
            </section>

            <section class="tasks-grid">
                <div class="task-card card-blue active-task" id="card1">
                    <div class="task-card-progress" id="progress1"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Maquinista Envasado</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task1"> Colocaci贸n de EPPs</p>
                        </div>
                    </div>
                </div>
                <div class="task-card card-purple active-task" id="card2">
                    <div class="task-card-progress" id="progress2"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Ayudante Envasado</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task2"> Colocaci贸n de EPPs</p>
                        </div>
                    </div>
                </div>
                <div class="task-card card-cyan active-task" id="card3">
                    <div class="task-card-progress" id="progress3"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Paletizador 1</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task3"> Colocaci贸n de EPPs</p>
                        </div>
                    </div>
                </div>
                <div class="task-card card-green active-task" id="card4">
                    <div class="task-card-progress" id="progress4"></div>
                    <div class="task-card-content-wrapper">
                        <div class="task-card-header"><span class="task-role">Paletizador 2</span><span
                                class="task-status-badge">Activo</span></div>
                        <div class="task-content">
                            <p class="task-text" id="task4"> Colocaci贸n de EPPs</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="controls-section">
                <button class="control-btn btn-start" onclick="startTimer()"><span></span> Iniciar</button>
                <button class="control-btn btn-pause" id="btnPause" onclick="togglePause()"><span
                        id="pauseIcon"></span> <span id="pauseText">Pausar</span></button>
                <button class="control-btn btn-reset" onclick="resetTimer()"><span></span> Reiniciar</button>
                <button class="control-btn btn-fullscreen" id="btnFullscreen" onclick="toggleFullscreen()"><span
                        id="fullscreenIcon"></span> <span id="fullscreenText">Pantalla Completa</span></button>
            </section>
        </main>
    </div>

    <!-- BARRA DE PROGRESO INFERIOR FIJA -->
    <div class="bottom-progress">
        <div class="bottom-progress-content">
            <div class="bottom-progress-info">
                <span class="bottom-progress-label">Progreso</span>
                <span class="bottom-progress-value green" id="bottomPercentage">0%</span>
            </div>
            <div class="bottom-progress-bar-wrapper">
                <div class="bottom-progress-bar-container">
                    <div class="bottom-progress-bar progress-green" id="bottomProgressBar" style="width: 0%;"></div>
                </div>
            </div>
            <div class="bottom-time-display" id="bottomTimeDisplay">00:00 / 29:00</div>
        </div>
    </div>

    <div class="modal-overlay" id="completionModal">
        <div class="modal-content">
            <div class="modal-icon"><svg viewBox="0 0 24 24">
                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                </svg></div>
            <h2 class="modal-title">隆FASE 1 COMPLETADA!</h2>
            <p class="modal-subtitle">Preparar para <span>FASE 2 (80 MIN)</span></p>
            <button class="modal-btn" onclick="closeModal()">Continuar</button>
        </div>
    </div>

    <script>
        let timerInterval = null, totalSeconds = 0, isPaused = false, isDragging = false;
        const maxSeconds = 29 * 60;

        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressHandle = document.getElementById('progressHandle');
        const timerDisplay = document.getElementById('timerDisplay');
        const timerSection = document.getElementById('timerSection');
        const pageAlert = document.getElementById('pageAlert');
        const bottomPercentage = document.getElementById('bottomPercentage');
        const bottomProgressBar = document.getElementById('bottomProgressBar');
        const bottomTimeDisplay = document.getElementById('bottomTimeDisplay');
        const btnPause = document.getElementById('btnPause');
        const pauseIcon = document.getElementById('pauseIcon');
        const pauseText = document.getElementById('pauseText');
        const logisticsTexts = document.querySelectorAll('.logistics-text');
        let currentLogisticsIndex = 0;

        setInterval(() => {
            logisticsTexts.forEach(t => t.classList.remove('active'));
            currentLogisticsIndex = (currentLogisticsIndex + 1) % logisticsTexts.length;
            logisticsTexts[currentLogisticsIndex].classList.add('active');
        }, 5000);

        function getPositionFromEvent(e) {
            const rect = progressContainer.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            return Math.max(0, Math.min(clientX - rect.left, rect.width)) / rect.width;
        }

        function updateFromPosition(p) {
            totalSeconds = Math.round(p * maxSeconds);
            updateDisplay();
        }

        function updateHandlePosition() {
            const pct = (totalSeconds / maxSeconds) * 100;
            const pos = (pct / 100) * progressContainer.offsetWidth - 12;
            progressHandle.style.left = `${Math.max(0, Math.min(pos, progressContainer.offsetWidth - 24))}px`;
        }

        progressContainer.addEventListener('mousedown', e => { isDragging = true; updateFromPosition(getPositionFromEvent(e)); });
        document.addEventListener('mousemove', e => { if (isDragging) { updateFromPosition(getPositionFromEvent(e)); } });
        document.addEventListener('mouseup', () => { isDragging = false; });

        progressContainer.addEventListener('touchstart', e => { isDragging = true; updateFromPosition(getPositionFromEvent(e)); }, { passive: true });
        document.addEventListener('touchmove', e => { if (isDragging) updateFromPosition(getPositionFromEvent(e)); }, { passive: true });
        document.addEventListener('touchend', () => { isDragging = false; });

        function formatTime(s) { return `${String(Math.floor(s / 60)).padStart(2, '0')}:${String(s % 60).padStart(2, '0')}`; }

        function updateDisplay() {
            timerDisplay.textContent = formatTime(totalSeconds);
            updateProgressBar();
            updateBottomProgress();
            updateHandlePosition();
            updateTasks();
            updateAlertState();
        }

        function updateTimer() {
            if (totalSeconds >= maxSeconds) { clearInterval(timerInterval); timerInterval = null; showCompletionModal(); return; }
            totalSeconds++;
            updateDisplay();
        }

        function updateAlertState() {
            const pct = (totalSeconds / maxSeconds) * 100;
            pageAlert.classList.remove('warning', 'critical');
            timerSection.classList.remove('warning', 'critical');
            timerDisplay.classList.remove('warning', 'critical');

            if (pct >= 90) { pageAlert.classList.add('critical'); timerSection.classList.add('critical'); timerDisplay.classList.add('critical'); }
            else if (pct >= 75) { pageAlert.classList.add('warning'); timerSection.classList.add('warning'); timerDisplay.classList.add('warning'); }
        }

        function updateBottomProgress() {
            const pct = (totalSeconds / maxSeconds) * 100;
            bottomPercentage.textContent = `${Math.round(pct)}%`;
            bottomProgressBar.style.width = `${pct}%`;
            bottomTimeDisplay.textContent = `${formatTime(totalSeconds)} / 29:00`;

            bottomPercentage.classList.remove('green', 'yellow', 'red');
            bottomProgressBar.classList.remove('progress-green', 'progress-yellow', 'progress-red');

            if (pct < 50) { bottomPercentage.classList.add('green'); bottomProgressBar.classList.add('progress-green'); }
            else if (pct < 85) { bottomPercentage.classList.add('yellow'); bottomProgressBar.classList.add('progress-yellow'); }
            else { bottomPercentage.classList.add('red'); bottomProgressBar.classList.add('progress-red'); }
        }

        function startTimer() { if (timerInterval) return; timerInterval = setInterval(updateTimer, 1000); isPaused = false; updatePauseButton(); }
        function stopTimer() { if (timerInterval) { clearInterval(timerInterval); timerInterval = null; } }
        function togglePause() {
            if (timerInterval) { stopTimer(); isPaused = true; }
            else if (isPaused || totalSeconds > 0) { timerInterval = setInterval(updateTimer, 1000); isPaused = false; }
            updatePauseButton();
        }

        function updatePauseButton() {
            if (isPaused || (!timerInterval && totalSeconds > 0)) { pauseIcon.textContent = ''; pauseText.textContent = 'Reanudar'; btnPause.classList.add('is-paused'); }
            else { pauseIcon.textContent = ''; pauseText.textContent = 'Pausar'; btnPause.classList.remove('is-paused'); }
        }

        function resetTimer() { stopTimer(); totalSeconds = 0; isPaused = false; updateDisplay(); updatePauseButton(); }

        function updateProgressBar() {
            const pct = (totalSeconds / maxSeconds) * 100;
            progressBar.style.width = `${pct}%`;
            progressBar.classList.remove('progress-green', 'progress-yellow', 'progress-red');
            progressBar.classList.add(pct < 50 ? 'progress-green' : pct < 85 ? 'progress-yellow' : 'progress-red');
        }

        const taskDefinitions = {
            task1: { 0: " Colocaci贸n de EPPs", 5: "Ъ Lavado de dosificadores griego", 25: " Tiempo Libre / Espera" },
            task2: { 0: " Colocaci贸n de EPPs", 5: "Ъ Lavado de dosificadores griego", 25: " Purgar l铆nea nitr贸geno (3 min)" },
            task3: { 0: " Colocaci贸n de EPPs", 5: "Ъ Lavado de dosificadores griego", 25: " Tiempo Libre / Espera" },
            task4: { 0: " Colocaci贸n de EPPs", 5: "Ъ Lavado de dosificadores griego", 25: " Tiempo Libre / Espera" }
        };

        function getTaskForMinute(id, m) {
            let t = taskDefinitions[id][0];
            for (const min in taskDefinitions[id]) {
                if (m >= parseInt(min)) t = taskDefinitions[id][min];
            }
            return t;
        }

        let previousTasks = {};

        // Obtener los l铆mites de tiempo de la tarea actual para cada tarjeta
        function getTaskTimeRange(id, currentMinute) {
            const times = Object.keys(taskDefinitions[id]).map(Number).sort((a, b) => a - b);
            let startMin = 0;
            let endMin = 29;

            for (let i = 0; i < times.length; i++) {
                if (currentMinute >= times[i]) {
                    startMin = times[i];
                    endMin = times[i + 1] !== undefined ? times[i + 1] : 29;
                }
            }

            return { startMin, endMin };
        }

        // Actualizar barras de progreso basado en cada fase de tarea
        function updateCardProgressBars() {
            const currentMinute = Math.floor(totalSeconds / 60);

            for (let i = 1; i <= 4; i++) {
                const progressEl = document.getElementById('progress' + i);
                const card = document.getElementById('card' + i);
                const taskId = 'task' + i;

                if (progressEl && card) {
                    if (card.classList.contains('idle')) {
                        // Ocultar barra en tarjetas idle y quitar temblor
                        progressEl.style.width = '0%';
                        progressEl.classList.remove('card-progress-green', 'card-progress-yellow', 'card-progress-red');
                        card.classList.remove('card-shake');
                    } else {
                        // Calcular progreso dentro de esta fase
                        const { startMin, endMin } = getTaskTimeRange(taskId, currentMinute);
                        const phaseStartSeconds = startMin * 60;
                        const phaseEndSeconds = endMin * 60;
                        const phaseDuration = phaseEndSeconds - phaseStartSeconds;
                        const elapsedInPhase = totalSeconds - phaseStartSeconds;

                        // Porcentaje de progreso en esta fase (0-100%)
                        const pct = Math.min(100, Math.max(0, (elapsedInPhase / phaseDuration) * 100));

                        // Actualizar ancho de la barra
                        progressEl.style.width = `${pct}%`;

                        // Actualizar color seg煤n el progreso de la fase
                        progressEl.classList.remove('card-progress-green', 'card-progress-yellow', 'card-progress-red');

                        if (pct < 50) {
                            progressEl.classList.add('card-progress-green');
                            card.classList.remove('card-shake');
                        } else if (pct < 85) {
                            progressEl.classList.add('card-progress-yellow');
                            card.classList.remove('card-shake');
                        } else {
                            progressEl.classList.add('card-progress-red');
                            // Solo tiembla si NO est谩 en idle (Tiempo Libre / Espera)
                            if (!card.classList.contains('idle')) {
                                card.classList.add('card-shake');
                            } else {
                                card.classList.remove('card-shake');
                            }
                        }
                    }
                }
            }
        }

        function updateTasks() {
            const m = Math.floor(totalSeconds / 60);
            for (const id in taskDefinitions) {
                const task = getTaskForMinute(id, m);
                const el = document.getElementById(id);
                const cardNum = id.replace('task', '');
                const card = document.getElementById('card' + cardNum);
                const badge = card.querySelector('.task-status-badge');
                const isIdle = task.includes('Tiempo Libre') || task.includes('Espera');

                if (isIdle) {
                    card.classList.add('idle');
                    card.classList.remove('active-task');
                    badge.textContent = 'En Espera';
                } else {
                    card.classList.remove('idle');
                    card.classList.add('active-task');
                    badge.textContent = 'Activo';
                }

                if (previousTasks[id] !== task) {
                    el.classList.add('fade-out');
                    setTimeout(() => { el.textContent = task; el.classList.remove('fade-out'); }, 300);
                    previousTasks[id] = task;
                }
            }

            // Actualizar barras de progreso en cada tarjeta
            updateCardProgressBars();

            // Actualizar listas de tareas del equipo
            updateTeamTaskLists(m);
        }

        // Actualizar listas de tareas en el sidebar del equipo
        function updateTeamTaskLists(currentMinute) {
            // Definir las tareas de cada miembro del equipo
            const teamTasks = {
                'maquinista': [
                    { name: 'Colocaci贸n de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ],
                'ayudante': [
                    { name: 'Colocaci贸n de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Purgar l铆nea nitr贸geno (3 min)', startMin: 25, endMin: 29 }
                ],
                'paletizador1': [
                    { name: 'Colocaci贸n de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ],
                'paletizador2': [
                    { name: 'Colocaci贸n de EPPs', startMin: 0, endMin: 5 },
                    { name: 'Lavado de dosificadores griego', startMin: 5, endMin: 25 },
                    { name: 'Tiempo Libre / Espera', startMin: 25, endMin: 29 }
                ]
            };

            // Actualizar cada lista de tareas
            for (const [member, tasks] of Object.entries(teamTasks)) {
                const tasksList = document.getElementById(`tasks-${member}`);
                if (!tasksList) continue;

                const taskItems = tasksList.querySelectorAll('.member-task-item');

                tasks.forEach((task, index) => {
                    if (taskItems[index]) {
                        const indicator = taskItems[index].querySelector('.task-indicator');

                        // Remover clases previas
                        taskItems[index].classList.remove('completed', 'active', 'pending');
                        indicator.classList.remove('completed', 'active', 'pending');

                        // Determinar estado
                        if (currentMinute >= task.endMin) {
                            // Tarea completada
                            taskItems[index].classList.add('completed');
                            indicator.classList.add('completed');
                        } else if (currentMinute >= task.startMin && currentMinute < task.endMin) {
                            // Tarea activa
                            taskItems[index].classList.add('active');
                            indicator.classList.add('active');
                        } else {
                            // Tarea pendiente
                            taskItems[index].classList.add('pending');
                            indicator.classList.add('pending');
                        }
                    }
                });
            }
        }

        function showCompletionModal() { pageAlert.classList.remove('warning', 'critical'); document.getElementById('completionModal').classList.add('active'); }
        function closeModal() { document.getElementById('completionModal').classList.remove('active'); }

        for (const id in taskDefinitions) previousTasks[id] = taskDefinitions[id][0];
        updateHandlePosition();

        // Pantalla completa
        function toggleFullscreen() {
            const btn = document.getElementById('btnFullscreen');
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');

            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    icon.textContent = '';
                    text.textContent = 'Salir';
                    btn.classList.add('is-fullscreen');
                }).catch(err => console.log(err));
            } else {
                document.exitFullscreen().then(() => {
                    icon.textContent = '';
                    text.textContent = 'Pantalla Completa';
                    btn.classList.remove('is-fullscreen');
                }).catch(err => console.log(err));
            }
        }

        document.addEventListener('fullscreenchange', () => {
            const btn = document.getElementById('btnFullscreen');
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');
            if (!document.fullscreenElement) {
                icon.textContent = '';
                text.textContent = 'Pantalla Completa';
                btn.classList.remove('is-fullscreen');
            }
        });
    </script>
</body>


</html>
